import{a as U,b as D}from"./rider-DcLWKAtR.js";import{d as j,r as f,n as z,O as C,bl as B,b as R,o as S,f as t,w as a,e as s,M as q,p as M,q as O,B as $,g,P as V,t as b,S as F}from"./index-DSqQRdfM.js";import{a as G,_ as L}from"./Grid-BQ8t8-FH.js";import{_ as T}from"./Form-Beo7jV4f.js";import{_ as A}from"./Space-DnyABEot.js";const E={class:"h-full p-24px"},P={class:"flex items-center"},H={class:"space-y-20px"},J={class:"flex gap-24px"},K={class:"flex-1"},Q={class:"flex-1"},W={class:"flex gap-24px"},X={class:"flex-1"},Y={class:"flex-1"},Z={class:"flex gap-24px"},ee={class:"flex-1"},te={class:"mt-24px flex justify-center border-t border-gray-200 pt-16px dark:border-gray-700"},se={class:"flex items-center"},ae={class:"flex items-center justify-between"},ne={class:"flex items-center justify-between"},oe={class:"text-sm"},le={class:"flex items-center justify-between"},re={class:"text-sm"},x="1663b73718a54c65b32f5b6787972949",ie=j({name:"profile",__name:"index",setup(de){const u=f(null),c=f(!1),n=z({applicationUserId:"",name:"",phoneNumber:"",riderId:"",vehicleNumber:""}),v={name:[{required:!0,message:"请输入姓名",trigger:"blur"},{max:50,message:"姓名长度不能超过50个字符",trigger:"blur"}],phoneNumber:[{required:!0,message:"请输入手机号",trigger:"blur"},{pattern:/^1[3-9]\d{9}$/,message:"请输入正确的手机号格式",trigger:"blur"}],vehicleNumber:[{max:20,message:"车辆编号长度不能超过20个字符",trigger:"blur"}]};async function h(){try{const{data:i}=await U({riderId:x});i&&Object.assign(n,i)}catch(i){console.error("获取骑手信息失败",i),window.$message?.error("获取骑手信息失败，请检查网络连接"),Object.assign(n,{applicationUserId:"mock_user_001",name:"测试骑手",phoneNumber:"13800138000",riderId:x,vehicleNumber:"宁A12345"})}}C(()=>{h()});async function y(){u.value?.validate(async i=>{if(i)return;c.value=!0;const{name:e,phoneNumber:p,vehicleNumber:r}=n;try{const{data:o}=await D(n.riderId,{name:e,phoneNumber:p,vehicleNumber:r});o&&(window.$message?.success("个人信息更新成功！"),Object.assign(n,o))}catch(o){console.error("更新骑手信息失败",o);const d=o?.response?.data?.message||"更新失败，请稍后重试";window.$message?.error(d)}finally{c.value=!1}})}return(i,e)=>{const p=q,r=B("Icon"),o=O,d=M,N=$,I=T,m=G,w=V,_=A,k=L;return S(),R("div",E,[t(p,{bordered:!1,class:"mb-24px"},{default:a(()=>e[5]||(e[5]=[s("div",{class:"flex items-center justify-between"},[s("div",{class:"flex-1"},[s("h1",{class:"text-2xl text-gray-800 font-bold dark:text-gray-200"},"个人信息管理"),s("p",{class:"mt-8px text-gray-600 dark:text-gray-400"},"管理您的个人基本信息和账户设置，确保信息准确无误。")])],-1)])),_:1,__:[5]}),t(k,{cols:24,"x-gap":16,"y-gap":16},{default:a(()=>[t(m,{span:16},{default:a(()=>[t(p,{bordered:!1,class:"rounded-16px shadow-sm"},{header:a(()=>[s("div",P,[t(r,{name:"mdi:account-edit",class:"text-xl text-blue-500"}),e[6]||(e[6]=s("span",{class:"text-lg font-semibold"},"基本信息",-1))])]),default:a(()=>[t(I,{ref_key:"formRef",ref:u,model:n,rules:v,"label-placement":"top","label-width":"120px","require-mark-placement":"right-hanging",size:"large"},{default:a(()=>[s("div",H,[s("div",J,[s("div",K,[t(d,{label:"用户ID",path:"applicationUserId"},{default:a(()=>[t(o,{value:n.applicationUserId,"onUpdate:value":e[0]||(e[0]=l=>n.applicationUserId=l),placeholder:"用户ID",disabled:"",class:"bg-gray-50 dark:bg-gray-800"},null,8,["value"])]),_:1})]),s("div",Q,[t(d,{label:"骑手ID",path:"riderId"},{default:a(()=>[t(o,{value:n.riderId,"onUpdate:value":e[1]||(e[1]=l=>n.riderId=l),placeholder:"骑手ID",disabled:"",class:"bg-gray-50 dark:bg-gray-800"},null,8,["value"])]),_:1})])]),s("div",W,[s("div",X,[t(d,{label:"姓名",path:"name"},{default:a(()=>[t(o,{value:n.name,"onUpdate:value":e[2]||(e[2]=l=>n.name=l),placeholder:"请输入您的真实姓名",clearable:""},{prefix:a(()=>[t(r,{name:"mdi:account",class:"text-gray-400"})]),_:1},8,["value"])]),_:1})]),s("div",Y,[t(d,{label:"手机号",path:"phoneNumber"},{default:a(()=>[t(o,{value:n.phoneNumber,"onUpdate:value":e[3]||(e[3]=l=>n.phoneNumber=l),placeholder:"请输入手机号码",clearable:""},{prefix:a(()=>[t(r,{name:"mdi:phone",class:"text-gray-400"})]),_:1},8,["value"])]),_:1})])]),s("div",Z,[s("div",ee,[t(d,{label:"车辆编号",path:"vehicleNumber"},{default:a(()=>[t(o,{value:n.vehicleNumber,"onUpdate:value":e[4]||(e[4]=l=>n.vehicleNumber=l),placeholder:"请输入车辆编号",clearable:""},{prefix:a(()=>[t(r,{name:"mdi:car",class:"text-gray-400"})]),_:1},8,["value"])]),_:1})]),e[7]||(e[7]=s("div",{class:"flex-1"},null,-1))])]),s("div",te,[t(N,{type:"primary",size:"large",loading:c.value,onClick:y},{icon:a(()=>[t(r,{name:"mdi:content-save"})]),default:a(()=>[e[8]||(e[8]=g(" 保存更改 "))]),_:1,__:[8]},8,["loading"])])]),_:1},8,["model"])]),_:1})]),_:1}),t(m,{span:8},{default:a(()=>[t(_,{vertical:"",size:16},{default:a(()=>[t(p,{bordered:!1},{header:a(()=>[s("div",se,[t(r,{name:"mdi:account-edit",class:"text-xl text-blue-500"}),e[9]||(e[9]=s("span",{class:"text-lg font-semibold"},"账户状态",-1))])]),default:a(()=>[t(_,{vertical:"",size:12},{default:a(()=>[s("div",ae,[e[11]||(e[11]=s("span",null,"账户状态",-1)),t(w,{type:"success",size:"small"},{default:a(()=>e[10]||(e[10]=[g("正常")])),_:1,__:[10]})]),s("div",ne,[e[12]||(e[12]=s("span",null,"注册时间",-1)),s("span",oe,b(new Date().toLocaleDateString("zh-CN")),1)]),s("div",le,[e[13]||(e[13]=s("span",null,"最后更新",-1)),s("span",re,b(new Date().toLocaleDateString("zh-CN")),1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})])}}}),fe=F(ie,[["__scopeId","data-v-10cbd25f"]]);export{fe as default};
