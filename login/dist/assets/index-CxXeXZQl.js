import{d as k,a as m,aJ as y,b as a,o as l,e,aK as z,aL as B,y as d,A as b,f as $,ax as i,aM as V,t as g,c as x,w,g as C,B as N,aN as M,av as G}from"./index-XFiYY7c-.js";const L={class:"absolute-lt z-1 size-full overflow-hidden"},S={class:"absolute -right-300px -top-900px lt-sm:-right-100px lt-sm:-top-1170px"},E={height:"1337",width:"1337"},I={id:"linearGradient-2",x1:"0.79",y1:"0.62",x2:"0.21",y2:"0.86"},q=["stop-color"],R=["stop-color"],T={class:"absolute -bottom-400px -left-200px lt-sm:-bottom-760px lt-sm:-left-100px"},Z={height:"896",width:"967.8852157128662"},A={id:"linearGradient-3",x1:"0.5",y1:"0",x2:"0.5",y2:"1"},D=["stop-color"],J=["stop-color"],K=k({name:"WaveBg",__name:"wave-bg",props:{themeColor:{}},setup(f){const u=f,p=m(()=>y(u.themeColor,200)),r=m(()=>y(u.themeColor,500));return(o,t)=>(l(),a("div",L,[e("div",S,[(l(),a("svg",E,[e("defs",null,[t[0]||(t[0]=e("path",{id:"path-1",opacity:"1","fill-rule":"evenodd",d:"M1337,668.5 C1337,1037.455193874239 1037.455193874239,1337 668.5,1337 C523.6725684305388,1337 337,1236 370.50000000000006,1094 C434.03835568300906,824.6732385973953 6.906089672974592e-14,892.6277623047779 0,668.5000000000001 C0,299.5448061257611 299.5448061257609,1.1368683772161603e-13 668.4999999999999,0 C1037.455193874239,0 1337,299.544806125761 1337,668.5Z"},null,-1)),e("linearGradient",I,[e("stop",{offset:"0","stop-color":p.value,"stop-opacity":"1"},null,8,q),e("stop",{offset:"1","stop-color":r.value,"stop-opacity":"1"},null,8,R)])]),t[1]||(t[1]=e("g",{opacity:"1"},[e("use",{"xlink:href":"#path-1",fill:"url(#linearGradient-2)","fill-opacity":"1"})],-1))]))]),e("div",T,[(l(),a("svg",Z,[e("defs",null,[t[2]||(t[2]=e("path",{id:"path-2",opacity:"1","fill-rule":"evenodd",d:"M896,448 C1142.6325445712241,465.5747656464056 695.2579309733121,896 448,896 C200.74206902668806,896 5.684341886080802e-14,695.2579309733121 0,448.0000000000001 C0,200.74206902668806 200.74206902668791,5.684341886080802e-14 447.99999999999994,0 C695.2579309733121,0 475,418 896,448Z"},null,-1)),e("linearGradient",A,[e("stop",{offset:"0","stop-color":r.value,"stop-opacity":"1"},null,8,D),e("stop",{offset:"1","stop-color":p.value,"stop-opacity":"1"},null,8,J)])]),t[3]||(t[3]=e("g",{opacity:"1"},[e("use",{"xlink:href":"#path-2",fill:"url(#linearGradient-3)","fill-opacity":"1"})],-1))]))])]))}}),P={class:"verify-email-container"},W={class:"verify-content"},j={class:"verify-icon"},F={key:0,width:"80",height:"80",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},H={key:1,width:"80",height:"80",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},O={key:2,width:"80",height:"80",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Q={class:"verify-text"},U={key:0},X={class:"verify-button"},Y=k({name:"verify-email",__name:"index",setup(f){const u=z(),p=B(),r=d(!1),o=d("pending"),t=d(""),c=d(""),v=d("");b(()=>{c.value=u.query.userId||"",v.value=u.query.token||"",(!c.value||!v.value)&&(o.value="error",t.value="验证链接无效，缺少必要参数")});async function h(){if(!c.value||!v.value){t.value="验证参数不完整，请重新点击邮件中的验证链接";return}try{r.value=!0,o.value="pending";const{data:n,error:s}=await M(c.value,v.value);if(!n){o.value="error",t.value="验证失败，请重试 (backend error, fetchVerifyEmail() return None)";return}n.code===0?(o.value="success",t.value="邮箱验证成功！正在跳转到登录页面...",setTimeout(()=>{p.push("/login")},50)):(o.value="error",t.value=n?.message||"验证失败，请重试")}catch(n){o.value="error",t.value="网络错误，请稍后重试",console.error("Verification error:",n)}finally{r.value=!1}}return(n,s)=>{const _=N;return l(),a("div",P,[$(K,{"theme-color":"#1890ff"}),e("div",W,[e("div",j,[o.value==="pending"?(l(),a("svg",F,s[0]||(s[0]=[e("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z",fill:"#1890ff"},null,-1)]))):i("",!0),o.value==="success"?(l(),a("svg",H,s[1]||(s[1]=[e("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z",fill:"#52c41a"},null,-1)]))):i("",!0),o.value==="error"?(l(),a("svg",O,s[2]||(s[2]=[e("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z",fill:"#ff4d4f"},null,-1)]))):i("",!0)]),e("div",Q,[s[3]||(s[3]=e("h2",null,"邮箱验证",-1)),o.value==="pending"?(l(),a("p",U," 请点击下方按钮完成邮箱验证，验证成功后即可正常使用济时达外卖服务。 ")):i("",!0),t.value?(l(),a("p",{key:1,class:V({"success-text":o.value==="success","error-text":o.value==="error"})},g(t.value),3)):i("",!0)]),e("div",X,[o.value==="pending"?(l(),x(_,{key:0,type:"primary",size:"large",loading:r.value,onClick:h},{default:w(()=>[C(g(r.value?"验证中...":"验证邮箱"),1)]),_:1},8,["loading"])):i("",!0),o.value==="error"?(l(),x(_,{key:1,type:"primary",size:"large",onClick:h},{default:w(()=>s[4]||(s[4]=[C(" 重新验证 ")])),_:1,__:[4]})):i("",!0)])])])}}}),te=G(Y,[["__scopeId","data-v-e6d0bdc1"]]);export{te as default};
