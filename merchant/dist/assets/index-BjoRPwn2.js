import{r as I,a as y,i as oe,j as le,d as L,k as J,b as z,o as v,e as t,l as ae,m as X,u as O,n as D,p as Q,$ as n,c as S,w as a,f as o,t as h,h as e,N as ne,F as Y,q as E,g as k,s as T,v as te,B as K,x as V,y as se,z as re,A as ie,C as de,D as G,E as ce,G as ue,H as pe,I as me,T as ge,J as fe,K as _e,L as he}from"./index-BAcIoLG0.js";import{u as A,a as W,R as ve}from"./form-M2uVxXuZ.js";import{_ as j,a as q}from"./FormItem-DxvZJNRh.js";import{_ as we}from"./Alert-2GmvxLib.js";import{N as H}from"./Space-Dst7QrTu.js";import{N as be,a as ye}from"./RadioGroup-DJUe5P8e.js";function Ce(N){const c=I(0),i=y(()=>Math.ceil(c.value)),u=y(()=>c.value>0),{pause:d,resume:g}=oe(({delta:l})=>{if(c.value<=0){c.value=0,d();return}const p=l/1e3;c.value-=p,c.value<=0&&(c.value=0,d())},{immediate:!1});function w(l=N){c.value=l,g()}function f(){c.value=0,d()}return le(()=>{d()}),{count:i,isCounting:u,start:w,stop:f}}const Ne={class:"absolute-lt z-1 size-full overflow-hidden"},xe={class:"absolute -right-300px -top-900px lt-sm:-right-100px lt-sm:-top-1170px"},ke={height:"1337",width:"1337"},$e={id:"linearGradient-2",x1:"0.79",y1:"0.62",x2:"0.21",y2:"0.86"},Pe=["stop-color"],Se=["stop-color"],Re={class:"absolute -bottom-400px -left-200px lt-sm:-bottom-760px lt-sm:-left-100px"},ze={height:"896",width:"967.8852157128662"},Le={id:"linearGradient-3",x1:"0.5",y1:"0",x2:"0.5",y2:"1"},Me=["stop-color"],Ue=["stop-color"],Be=L({name:"WaveBg",__name:"wave-bg",props:{themeColor:{}},setup(N){const c=N,i=y(()=>J(c.themeColor,200)),u=y(()=>J(c.themeColor,500));return(d,g)=>(v(),z("div",Ne,[t("div",xe,[(v(),z("svg",ke,[t("defs",null,[g[0]||(g[0]=t("path",{id:"path-1",opacity:"1","fill-rule":"evenodd",d:"M1337,668.5 C1337,1037.455193874239 1037.455193874239,1337 668.5,1337 C523.6725684305388,1337 337,1236 370.50000000000006,1094 C434.03835568300906,824.6732385973953 6.906089672974592e-14,892.6277623047779 0,668.5000000000001 C0,299.5448061257611 299.5448061257609,1.1368683772161603e-13 668.4999999999999,0 C1037.455193874239,0 1337,299.544806125761 1337,668.5Z"},null,-1)),t("linearGradient",$e,[t("stop",{offset:"0","stop-color":i.value,"stop-opacity":"1"},null,8,Pe),t("stop",{offset:"1","stop-color":u.value,"stop-opacity":"1"},null,8,Se)])]),g[1]||(g[1]=t("g",{opacity:"1"},[t("use",{"xlink:href":"#path-1",fill:"url(#linearGradient-2)","fill-opacity":"1"})],-1))]))]),t("div",Re,[(v(),z("svg",ze,[t("defs",null,[g[2]||(g[2]=t("path",{id:"path-2",opacity:"1","fill-rule":"evenodd",d:"M896,448 C1142.6325445712241,465.5747656464056 695.2579309733121,896 448,896 C200.74206902668806,896 5.684341886080802e-14,695.2579309733121 0,448.0000000000001 C0,200.74206902668806 200.74206902668791,5.684341886080802e-14 447.99999999999994,0 C695.2579309733121,0 475,418 896,448Z"},null,-1)),t("linearGradient",Le,[t("stop",{offset:"0","stop-color":u.value,"stop-opacity":"1"},null,8,Me),t("stop",{offset:"1","stop-color":i.value,"stop-opacity":"1"},null,8,Ue)])]),g[3]||(g[3]=t("g",{opacity:"1"},[t("use",{"xlink:href":"#path-2",fill:"url(#linearGradient-3)","fill-opacity":"1"})],-1))]))])]))}}),Fe={class:"w-full"},Ge={class:"form-label"},Ie={class:"w-full"},Te={class:"form-label"},Oe={class:"w-full"},De={class:"form-label"},Ee={class:"w-full"},Ke={class:"form-label"},Ve={class:"w-full"},Ae={key:0,class:"flex-y-center justify-between"},We=L({name:"PwdLogin",__name:"pwd-login",setup(N){const c=ae(),i=X(),{toggleLoginModule:u}=O(),{formRef:d,validate:g}=A(),w=I("user"),f=I("username"),l=D({userName:"Soybean",password:"123456"}),p={user:{userName:"Soybean",password:"123456"},rider:{userName:"rider_demo",password:"123456"},merchant:{userName:"test_1226",password:"123456"},admin:{userName:"admin",password:"123456"}};Q(w,r=>{const s=p[r];l.userName=s.userName,l.password=s.password},{immediate:!0});const _=y(()=>{const{formRules:r}=W();return{userName:r.userName,password:r.pwd}});async function b(){if(f.value!=="username"){u("code-login");return}await g(),await c.login(l.userName,l.password)}const m=y(()=>[{label:n("page.login.pwdLogin.user"),value:"user"},{label:i.locale==="zh-CN"?"骑手":"Rider",value:"rider"},{label:i.locale==="zh-CN"?"商家":"Merchant",value:"merchant"},{label:n("page.login.pwdLogin.admin"),value:"admin"}]),$=y(()=>[{label:i.locale==="zh-CN"?"用户名登录":"Username Login",value:"username"},{label:i.locale==="zh-CN"?"邮箱登录":"Email Login",value:"email"},{label:i.locale==="zh-CN"?"手机号登录":"Phone Login",value:"phone"}]);return Q(f,r=>{(r==="email"||r==="phone")&&setTimeout(()=>{u("code-login")},300)}),(r,s)=>{const M=ne,P=j,x=E,U=we,F=te,B=K,Z=H,C=q;return v(),S(C,{ref_key:"formRef",ref:d,model:l,rules:_.value,size:"large","show-label":!1,onKeyup:V(b,["enter"])},{default:a(()=>[o(P,null,{default:a(()=>[t("div",Fe,[t("label",Ge,h(e(n)("page.login.pwdLogin.loginRole")),1),o(M,{value:w.value,"onUpdate:value":s[0]||(s[0]=R=>w.value=R),options:m.value,placeholder:e(n)("page.login.common.selectRolePlaceholder")},null,8,["value","options","placeholder"])])]),_:1}),o(P,null,{default:a(()=>[t("div",Ie,[t("label",Te,h(e(n)("page.login.pwdLogin.loginMethod")),1),o(M,{value:f.value,"onUpdate:value":s[1]||(s[1]=R=>f.value=R),options:$.value,placeholder:e(n)("page.login.common.selectMethodPlaceholder")},null,8,["value","options","placeholder"])])]),_:1}),f.value==="username"?(v(),z(Y,{key:0},[o(P,{path:"userName"},{default:a(()=>[t("div",Oe,[t("label",De,h(e(i).locale==="zh-CN"?"用户名":"Username"),1),o(x,{value:l.userName,"onUpdate:value":s[2]||(s[2]=R=>l.userName=R),placeholder:e(n)("page.login.common.userNamePlaceholder")},null,8,["value","placeholder"])])]),_:1}),o(P,{path:"password"},{default:a(()=>[t("div",Ee,[t("label",Ke,h(e(i).locale==="zh-CN"?"密码":"Password"),1),o(x,{value:l.password,"onUpdate:value":s[3]||(s[3]=R=>l.password=R),type:"password","show-password-on":"click",placeholder:e(n)("page.login.common.passwordPlaceholder")},null,8,["value","placeholder"])])]),_:1})],64)):(v(),S(P,{key:1},{default:a(()=>[t("div",Ve,[o(U,{type:"info"},{default:a(()=>[k(h(f.value==="email"?e(i).locale==="zh-CN"?"将跳转到邮箱验证码登录页面":"Redirecting to email verification login page":e(i).locale==="zh-CN"?"将跳转到手机验证码登录页面":"Redirecting to phone verification login page"),1)]),_:1})])]),_:1})),o(Z,{vertical:"",size:18},{default:a(()=>[f.value==="username"?(v(),z("div",Ae,[o(F,null,{default:a(()=>[k(h(e(n)("page.login.pwdLogin.rememberMe")),1)]),_:1}),o(B,{quaternary:"",onClick:s[4]||(s[4]=R=>e(u)("reset-pwd"))},{default:a(()=>[k(h(e(n)("page.login.pwdLogin.forgetPassword")),1)]),_:1})])):T("",!0),o(B,{type:"primary",size:"large",round:"",block:"",loading:e(c).loginLoading,onClick:b},{default:a(()=>[k(h(f.value==="username"?e(n)("common.confirm"):e(i).locale==="zh-CN"?"继续":"Continue"),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["model","rules"])}}}),je=se(We,[["__scopeId","data-v-edb9d379"]]);function ee(){const{loading:N,startLoading:c,endLoading:i}=re(),{count:u,start:d,stop:g,isCounting:w}=Ce(10),f=y(()=>{let _=n("page.login.codeLogin.getCode");const b=n("page.login.codeLogin.reGetCode",{time:u.value});return N.value&&(_=""),w.value&&(_=b),_});function l(_){return _.trim()===""?(window.$message?.error?.(n("form.phone.required")),!1):ve.test(_)?!0:(window.$message?.error?.(n("form.phone.invalid")),!1)}async function p(_){!l(_)||N.value||(c(),await new Promise(m=>{setTimeout(m,500)}),window.$message?.success?.(n("page.login.codeLogin.sendCodeSuccess")),d(),i())}return{label:f,start:d,stop:g,isCounting:w,loading:N,getCaptcha:p}}const qe={class:"w-full flex-y-center gap-16px"},He=L({name:"CodeLogin",__name:"code-login",setup(N){const{toggleLoginModule:c}=O(),{formRef:i,validate:u}=A(),{label:d,isCounting:g,loading:w,getCaptcha:f}=ee(),l=I("phone"),p=D({phone:"",email:"",code:""}),_=y(()=>{const{formRules:r}=W();return{phone:r.phone,email:r.email,code:r.code}}),b=y(()=>l.value==="phone"?p.phone:p.email);async function m(){await u(),window.$message?.success(n("page.login.common.validateSuccess"))}const $=y(()=>[{label:"手机号登录",value:"phone"},{label:"邮箱登录",value:"email"}]);return(r,s)=>{const M=ye,P=H,x=be,U=j,F=E,B=K,Z=q;return v(),S(Z,{ref_key:"formRef",ref:i,model:p,rules:_.value,size:"large","show-label":!1,onKeyup:V(m,["enter"])},{default:a(()=>[o(U,null,{default:a(()=>[o(x,{value:l.value,"onUpdate:value":s[0]||(s[0]=C=>l.value=C),class:"w-full"},{default:a(()=>[o(P,null,{default:a(()=>[(v(!0),z(Y,null,ie($.value,C=>(v(),S(M,{key:C.value,value:C.value},{default:a(()=>[k(h(C.label),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["value"])]),_:1}),l.value==="phone"?(v(),S(U,{key:0,path:"phone"},{default:a(()=>[o(F,{value:p.phone,"onUpdate:value":s[1]||(s[1]=C=>p.phone=C),placeholder:e(n)("page.login.common.phonePlaceholder")},null,8,["value","placeholder"])]),_:1})):T("",!0),l.value==="email"?(v(),S(U,{key:1,path:"email"},{default:a(()=>[o(F,{value:p.email,"onUpdate:value":s[2]||(s[2]=C=>p.email=C),placeholder:e(n)("page.login.common.emailPlaceholder")},null,8,["value","placeholder"])]),_:1})):T("",!0),o(U,{path:"code"},{default:a(()=>[t("div",qe,[o(F,{value:p.code,"onUpdate:value":s[3]||(s[3]=C=>p.code=C),placeholder:e(n)("page.login.common.codePlaceholder")},null,8,["value","placeholder"]),o(B,{size:"large",disabled:e(g),loading:e(w),onClick:s[4]||(s[4]=C=>e(f)(b.value))},{default:a(()=>[k(h(e(d)),1)]),_:1},8,["disabled","loading"])])]),_:1}),o(P,{vertical:"",size:18,class:"w-full"},{default:a(()=>[o(B,{type:"primary",size:"large",round:"",block:"",onClick:m},{default:a(()=>[k(h(e(n)("common.confirm")),1)]),_:1}),o(B,{size:"large",round:"",block:"",onClick:s[5]||(s[5]=C=>e(c)("pwd-login"))},{default:a(()=>[k(h(e(n)("page.login.common.back")),1)]),_:1})]),_:1})]),_:1},8,["model","rules"])}}}),Ze={class:"w-full flex-y-center gap-16px"},Je=L({name:"Register",__name:"register",setup(N){const{toggleLoginModule:c}=O(),{formRef:i,validate:u}=A(),{label:d,isCounting:g,loading:w,getCaptcha:f}=ee(),l=D({phone:"",code:"",password:"",confirmPassword:""}),p=y(()=>{const{formRules:b,createConfirmPwdRule:m}=W();return{phone:b.phone,code:b.code,password:b.pwd,confirmPassword:m(l.password)}});async function _(){await u(),window.$message?.success(n("page.login.common.validateSuccess"))}return(b,m)=>{const $=E,r=j,s=K,M=H,P=q;return v(),S(P,{ref_key:"formRef",ref:i,model:l,rules:p.value,size:"large","show-label":!1,onKeyup:V(_,["enter"])},{default:a(()=>[o(r,{path:"phone"},{default:a(()=>[o($,{value:l.phone,"onUpdate:value":m[0]||(m[0]=x=>l.phone=x),placeholder:e(n)("page.login.common.phonePlaceholder")},null,8,["value","placeholder"])]),_:1}),o(r,{path:"code"},{default:a(()=>[t("div",Ze,[o($,{value:l.code,"onUpdate:value":m[1]||(m[1]=x=>l.code=x),placeholder:e(n)("page.login.common.codePlaceholder")},null,8,["value","placeholder"]),o(s,{size:"large",disabled:e(g),loading:e(w),onClick:m[2]||(m[2]=x=>e(f)(l.phone))},{default:a(()=>[k(h(e(d)),1)]),_:1},8,["disabled","loading"])])]),_:1}),o(r,{path:"password"},{default:a(()=>[o($,{value:l.password,"onUpdate:value":m[3]||(m[3]=x=>l.password=x),type:"password","show-password-on":"click",placeholder:e(n)("page.login.common.passwordPlaceholder")},null,8,["value","placeholder"])]),_:1}),o(r,{path:"confirmPassword"},{default:a(()=>[o($,{value:l.confirmPassword,"onUpdate:value":m[4]||(m[4]=x=>l.confirmPassword=x),type:"password","show-password-on":"click",placeholder:e(n)("page.login.common.confirmPasswordPlaceholder")},null,8,["value","placeholder"])]),_:1}),o(M,{vertical:"",size:18,class:"w-full"},{default:a(()=>[o(s,{type:"primary",size:"large",round:"",block:"",onClick:_},{default:a(()=>[k(h(e(n)("common.confirm")),1)]),_:1}),o(s,{size:"large",round:"",block:"",onClick:m[5]||(m[5]=x=>e(c)("pwd-login"))},{default:a(()=>[k(h(e(n)("page.login.common.back")),1)]),_:1})]),_:1})]),_:1},8,["model","rules"])}}}),Qe=L({name:"ResetPwd",__name:"reset-pwd",setup(N){const{toggleLoginModule:c}=O(),{formRef:i,validate:u}=A(),d=D({phone:"",code:"",password:"",confirmPassword:""}),g=y(()=>{const{formRules:f,createConfirmPwdRule:l}=W();return{phone:f.phone,password:f.pwd,confirmPassword:l(d.password)}});async function w(){await u(),window.$message?.success(n("page.login.common.validateSuccess"))}return(f,l)=>{const p=E,_=j,b=K,m=H,$=q;return v(),S($,{ref_key:"formRef",ref:i,model:d,rules:g.value,size:"large","show-label":!1,onKeyup:V(w,["enter"])},{default:a(()=>[o(_,{path:"phone"},{default:a(()=>[o(p,{value:d.phone,"onUpdate:value":l[0]||(l[0]=r=>d.phone=r),placeholder:e(n)("page.login.common.phonePlaceholder")},null,8,["value","placeholder"])]),_:1}),o(_,{path:"code"},{default:a(()=>[o(p,{value:d.code,"onUpdate:value":l[1]||(l[1]=r=>d.code=r),placeholder:e(n)("page.login.common.codePlaceholder")},null,8,["value","placeholder"])]),_:1}),o(_,{path:"password"},{default:a(()=>[o(p,{value:d.password,"onUpdate:value":l[2]||(l[2]=r=>d.password=r),type:"password","show-password-on":"click",placeholder:e(n)("page.login.common.passwordPlaceholder")},null,8,["value","placeholder"])]),_:1}),o(_,{path:"confirmPassword"},{default:a(()=>[o(p,{value:d.confirmPassword,"onUpdate:value":l[3]||(l[3]=r=>d.confirmPassword=r),type:"password","show-password-on":"click",placeholder:e(n)("page.login.common.confirmPasswordPlaceholder")},null,8,["value","placeholder"])]),_:1}),o(m,{vertical:"",size:18,class:"w-full"},{default:a(()=>[o(b,{type:"primary",size:"large",round:"",block:"",onClick:w},{default:a(()=>[k(h(e(n)("common.confirm")),1)]),_:1}),o(b,{size:"large",round:"",block:"",onClick:l[4]||(l[4]=r=>e(c)("pwd-login"))},{default:a(()=>[k(h(e(n)("page.login.common.back")),1)]),_:1})]),_:1})]),_:1},8,["model","rules"])}}}),Xe=L({name:"BindWechat",__name:"bind-wechat",setup(N){return(c,i)=>(v(),z("div"))}}),Ye={class:"w-400px lt-sm:w-300px"},eo={class:"flex-y-center justify-between"},oo={class:"text-28px text-primary font-600 lt-sm:text-22px"},lo={class:"i-flex-col"},ao={class:"pt-24px"},no={class:"text-18px text-primary font-medium"},to={class:"pt-24px"},mo=L({name:"login",__name:"index",props:{module:{}},setup(N){const c=N,i=X(),u=de(),d={"pwd-login":{label:G["pwd-login"],component:je},"code-login":{label:G["code-login"],component:He},register:{label:G.register,component:Je},"reset-pwd":{label:G["reset-pwd"],component:Qe},"bind-wechat":{label:G["bind-wechat"],component:Xe}},g=y(()=>d[c.module||"pwd-login"]),w=y(()=>u.darkMode?J(u.themeColor,600):u.themeColor),f=y(()=>{const l="#ffffff",p=u.darkMode?.5:.2;return ce(l,u.themeColor,p)});return(l,p)=>{const _=Be,b=ue,m=pe,$=me,r=_e;return v(),z("div",{class:"relative size-full flex-center overflow-hidden",style:he({backgroundColor:f.value})},[o(_,{"theme-color":w.value},null,8,["theme-color"]),o(r,{bordered:!1,class:"relative z-4 w-auto rd-12px"},{default:a(()=>[t("div",Ye,[t("header",eo,[o(b,{class:"text-64px text-primary lt-sm:text-48px"}),t("h3",oo,h(e(n)("system.loginTitle")),1),t("div",lo,[o(m,{"theme-schema":e(u).themeScheme,"show-tooltip":!1,class:"text-20px lt-sm:text-18px",onSwitch:e(u).toggleThemeScheme},null,8,["theme-schema","onSwitch"]),e(u).header.multilingual.visible?(v(),S($,{key:0,lang:e(i).locale,"lang-options":e(i).localeOptions,"show-tooltip":!1,onChangeLang:e(i).changeLocale},null,8,["lang","lang-options","onChangeLang"])):T("",!0)])]),t("main",ao,[t("h3",no,h(e(n)(g.value.label)),1),t("div",to,[o(ge,{name:e(u).page.animateMode,mode:"out-in",appear:""},{default:a(()=>[(v(),S(fe(g.value.component)))]),_:1},8,["name"])])])])]),_:1})],4)}}});export{mo as default};
