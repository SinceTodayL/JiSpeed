import{r as G,a as x,i as Y,j as ee,d as L,k as Z,b as z,o as w,e as t,l as oe,m as J,u as T,n as O,$ as a,p as le,c as P,w as n,f as o,t as v,h as e,q as ne,F as Q,s as E,g as $,v as I,x as ae,B as K,y as V,z as te,A as se,C as re,D as ie,E as F,G as ce,H as de,I as ue,J as pe,T as me,K as _e,L as ge,M as fe}from"./index-6UP9C2w-.js";import{u as D,a as A,R as he}from"./form-DEOqWwOc.js";import{_ as W,a as j}from"./FormItem-CpjSVtO1.js";import{_ as ve}from"./Alert-BARihn8i.js";import{_ as q}from"./Space-BqS-EdKT.js";import{N as we,a as be}from"./RadioGroup-BsqNdq69.js";function ye(N){const c=G(0),r=x(()=>Math.ceil(c.value)),d=x(()=>c.value>0),{pause:i,resume:m}=Y(({delta:l})=>{if(c.value<=0){c.value=0,i();return}const u=l/1e3;c.value-=u,c.value<=0&&(c.value=0,i())},{immediate:!1});function y(l=N){c.value=l,m()}function g(){c.value=0,i()}return ee(()=>{i()}),{count:r,isCounting:d,start:y,stop:g}}const Ce={class:"absolute-lt z-1 size-full overflow-hidden"},xe={class:"absolute -right-300px -top-900px lt-sm:-right-100px lt-sm:-top-1170px"},Ne={height:"1337",width:"1337"},ke={id:"linearGradient-2",x1:"0.79",y1:"0.62",x2:"0.21",y2:"0.86"},$e=["stop-color"],Pe=["stop-color"],Re={class:"absolute -bottom-400px -left-200px lt-sm:-bottom-760px lt-sm:-left-100px"},ze={height:"896",width:"967.8852157128662"},Se={id:"linearGradient-3",x1:"0.5",y1:"0",x2:"0.5",y2:"1"},Le=["stop-color"],Me=["stop-color"],Ue=L({name:"WaveBg",__name:"wave-bg",props:{themeColor:{}},setup(N){const c=N,r=x(()=>Z(c.themeColor,200)),d=x(()=>Z(c.themeColor,500));return(i,m)=>(w(),z("div",Ce,[t("div",xe,[(w(),z("svg",Ne,[t("defs",null,[m[0]||(m[0]=t("path",{id:"path-1",opacity:"1","fill-rule":"evenodd",d:"M1337,668.5 C1337,1037.455193874239 1037.455193874239,1337 668.5,1337 C523.6725684305388,1337 337,1236 370.50000000000006,1094 C434.03835568300906,824.6732385973953 6.906089672974592e-14,892.6277623047779 0,668.5000000000001 C0,299.5448061257611 299.5448061257609,1.1368683772161603e-13 668.4999999999999,0 C1037.455193874239,0 1337,299.544806125761 1337,668.5Z"},null,-1)),t("linearGradient",ke,[t("stop",{offset:"0","stop-color":r.value,"stop-opacity":"1"},null,8,$e),t("stop",{offset:"1","stop-color":d.value,"stop-opacity":"1"},null,8,Pe)])]),m[1]||(m[1]=t("g",{opacity:"1"},[t("use",{"xlink:href":"#path-1",fill:"url(#linearGradient-2)","fill-opacity":"1"})],-1))]))]),t("div",Re,[(w(),z("svg",ze,[t("defs",null,[m[2]||(m[2]=t("path",{id:"path-2",opacity:"1","fill-rule":"evenodd",d:"M896,448 C1142.6325445712241,465.5747656464056 695.2579309733121,896 448,896 C200.74206902668806,896 5.684341886080802e-14,695.2579309733121 0,448.0000000000001 C0,200.74206902668806 200.74206902668791,5.684341886080802e-14 447.99999999999994,0 C695.2579309733121,0 475,418 896,448Z"},null,-1)),t("linearGradient",Se,[t("stop",{offset:"0","stop-color":d.value,"stop-opacity":"1"},null,8,Le),t("stop",{offset:"1","stop-color":r.value,"stop-opacity":"1"},null,8,Me)])]),m[3]||(m[3]=t("g",{opacity:"1"},[t("use",{"xlink:href":"#path-2",fill:"url(#linearGradient-3)","fill-opacity":"1"})],-1))]))])]))}}),Be={class:"w-full"},Fe={class:"form-label"},Ge={class:"w-full"},Ie={class:"form-label"},Te={class:"w-full"},Oe={class:"form-label"},Ee={class:"w-full"},Ke={class:"form-label"},Ve={class:"w-full"},De={key:0,class:"flex-y-center justify-between"},Ae=L({name:"PwdLogin",__name:"pwd-login",setup(N){const c=oe(),r=J(),{toggleLoginModule:d}=T(),{formRef:i,validate:m}=D(),y=G("user"),g=G("username"),l=O({userName:"Soybean",password:"123456"}),u=x(()=>{const{formRules:b}=A();return{userName:b.userName,password:b.pwd}});async function _(){if(g.value!=="username"){d("code-login");return}await m(),await c.login(l.userName,l.password)}const C=x(()=>[{label:a("page.login.pwdLogin.user"),value:"user"},{label:r.locale==="zh-CN"?"骑手":"Rider",value:"rider"},{label:r.locale==="zh-CN"?"商家":"Merchant",value:"merchant"},{label:a("page.login.pwdLogin.admin"),value:"admin"}]),p=x(()=>[{label:r.locale==="zh-CN"?"用户名登录":"Username Login",value:"username"},{label:r.locale==="zh-CN"?"邮箱登录":"Email Login",value:"email"},{label:r.locale==="zh-CN"?"手机号登录":"Phone Login",value:"phone"}]);return le(g,b=>{(b==="email"||b==="phone")&&setTimeout(()=>{d("code-login")},300)}),(b,s)=>{const h=ne,R=W,S=E,k=ve,M=ae,U=K,B=q,H=j;return w(),P(H,{ref_key:"formRef",ref:i,model:l,rules:u.value,size:"large","show-label":!1,onKeyup:V(_,["enter"])},{default:n(()=>[o(R,null,{default:n(()=>[t("div",Be,[t("label",Fe,v(e(a)("page.login.pwdLogin.loginRole")),1),o(h,{value:y.value,"onUpdate:value":s[0]||(s[0]=f=>y.value=f),options:C.value,placeholder:e(a)("page.login.common.selectRolePlaceholder")},null,8,["value","options","placeholder"])])]),_:1}),o(R,null,{default:n(()=>[t("div",Ge,[t("label",Ie,v(e(a)("page.login.pwdLogin.loginMethod")),1),o(h,{value:g.value,"onUpdate:value":s[1]||(s[1]=f=>g.value=f),options:p.value,placeholder:e(a)("page.login.common.selectMethodPlaceholder")},null,8,["value","options","placeholder"])])]),_:1}),g.value==="username"?(w(),z(Q,{key:0},[o(R,{path:"userName"},{default:n(()=>[t("div",Te,[t("label",Oe,v(e(r).locale==="zh-CN"?"用户名":"Username"),1),o(S,{value:l.userName,"onUpdate:value":s[2]||(s[2]=f=>l.userName=f),placeholder:e(a)("page.login.common.userNamePlaceholder")},null,8,["value","placeholder"])])]),_:1}),o(R,{path:"password"},{default:n(()=>[t("div",Ee,[t("label",Ke,v(e(r).locale==="zh-CN"?"密码":"Password"),1),o(S,{value:l.password,"onUpdate:value":s[3]||(s[3]=f=>l.password=f),type:"password","show-password-on":"click",placeholder:e(a)("page.login.common.passwordPlaceholder")},null,8,["value","placeholder"])])]),_:1})],64)):(w(),P(R,{key:1},{default:n(()=>[t("div",Ve,[o(k,{type:"info"},{default:n(()=>[$(v(g.value==="email"?e(r).locale==="zh-CN"?"将跳转到邮箱验证码登录页面":"Redirecting to email verification login page":e(r).locale==="zh-CN"?"将跳转到手机验证码登录页面":"Redirecting to phone verification login page"),1)]),_:1})])]),_:1})),o(B,{vertical:"",size:18},{default:n(()=>[g.value==="username"?(w(),z("div",De,[o(M,null,{default:n(()=>[$(v(e(a)("page.login.pwdLogin.rememberMe")),1)]),_:1}),o(U,{quaternary:"",onClick:s[4]||(s[4]=f=>e(d)("reset-pwd"))},{default:n(()=>[$(v(e(a)("page.login.pwdLogin.forgetPassword")),1)]),_:1})])):I("",!0),o(U,{type:"primary",size:"large",round:"",block:"",loading:e(c).loginLoading,onClick:_},{default:n(()=>[$(v(g.value==="username"?e(a)("common.confirm"):e(r).locale==="zh-CN"?"继续":"Continue"),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["model","rules"])}}}),We=te(Ae,[["__scopeId","data-v-0a405608"]]);function X(){const{loading:N,startLoading:c,endLoading:r}=se(),{count:d,start:i,stop:m,isCounting:y}=ye(10),g=x(()=>{let _=a("page.login.codeLogin.getCode");const C=a("page.login.codeLogin.reGetCode",{time:d.value});return N.value&&(_=""),y.value&&(_=C),_});function l(_){return _.trim()===""?(window.$message?.error?.(a("form.phone.required")),!1):he.test(_)?!0:(window.$message?.error?.(a("form.phone.invalid")),!1)}async function u(_){!l(_)||N.value||(c(),await new Promise(p=>{setTimeout(p,500)}),window.$message?.success?.(a("page.login.codeLogin.sendCodeSuccess")),i(),r())}return{label:g,start:i,stop:m,isCounting:y,loading:N,getCaptcha:u}}const je={class:"w-full flex-y-center gap-16px"},qe=L({name:"CodeLogin",__name:"code-login",setup(N){const{toggleLoginModule:c}=T(),{formRef:r,validate:d}=D(),{label:i,isCounting:m,loading:y,getCaptcha:g}=X(),l=G("phone"),u=O({phone:"",email:"",code:""}),_=x(()=>{const{formRules:s}=A();return{phone:s.phone,email:s.email,code:s.code}}),C=x(()=>l.value==="phone"?u.phone:u.email);async function p(){await d(),window.$message?.success(a("page.login.common.validateSuccess"))}const b=x(()=>[{label:"手机号登录",value:"phone"},{label:"邮箱登录",value:"email"}]);return(s,h)=>{const R=be,S=q,k=we,M=W,U=E,B=K,H=j;return w(),P(H,{ref_key:"formRef",ref:r,model:u,rules:_.value,size:"large","show-label":!1,onKeyup:V(p,["enter"])},{default:n(()=>[o(M,null,{default:n(()=>[o(k,{value:l.value,"onUpdate:value":h[0]||(h[0]=f=>l.value=f),class:"w-full"},{default:n(()=>[o(S,null,{default:n(()=>[(w(!0),z(Q,null,re(b.value,f=>(w(),P(R,{key:f.value,value:f.value},{default:n(()=>[$(v(f.label),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["value"])]),_:1}),l.value==="phone"?(w(),P(M,{key:0,path:"phone"},{default:n(()=>[o(U,{value:u.phone,"onUpdate:value":h[1]||(h[1]=f=>u.phone=f),placeholder:e(a)("page.login.common.phonePlaceholder")},null,8,["value","placeholder"])]),_:1})):I("",!0),l.value==="email"?(w(),P(M,{key:1,path:"email"},{default:n(()=>[o(U,{value:u.email,"onUpdate:value":h[2]||(h[2]=f=>u.email=f),placeholder:e(a)("page.login.common.emailPlaceholder")},null,8,["value","placeholder"])]),_:1})):I("",!0),o(M,{path:"code"},{default:n(()=>[t("div",je,[o(U,{value:u.code,"onUpdate:value":h[3]||(h[3]=f=>u.code=f),placeholder:e(a)("page.login.common.codePlaceholder")},null,8,["value","placeholder"]),o(B,{size:"large",disabled:e(m),loading:e(y),onClick:h[4]||(h[4]=f=>e(g)(C.value))},{default:n(()=>[$(v(e(i)),1)]),_:1},8,["disabled","loading"])])]),_:1}),o(S,{vertical:"",size:18,class:"w-full"},{default:n(()=>[o(B,{type:"primary",size:"large",round:"",block:"",onClick:p},{default:n(()=>[$(v(e(a)("common.confirm")),1)]),_:1}),o(B,{size:"large",round:"",block:"",onClick:h[5]||(h[5]=f=>e(c)("pwd-login"))},{default:n(()=>[$(v(e(a)("page.login.common.back")),1)]),_:1})]),_:1})]),_:1},8,["model","rules"])}}}),He={class:"w-full flex-y-center gap-16px"},Ze=L({name:"Register",__name:"register",setup(N){const{toggleLoginModule:c}=T(),{formRef:r,validate:d}=D(),{label:i,isCounting:m,loading:y,getCaptcha:g}=X(),l=O({phone:"",code:"",password:"",confirmPassword:""}),u=x(()=>{const{formRules:C,createConfirmPwdRule:p}=A();return{phone:C.phone,code:C.code,password:C.pwd,confirmPassword:p(l.password)}});async function _(){await d(),window.$message?.success(a("page.login.common.validateSuccess"))}return(C,p)=>{const b=E,s=W,h=K,R=q,S=j;return w(),P(S,{ref_key:"formRef",ref:r,model:l,rules:u.value,size:"large","show-label":!1,onKeyup:V(_,["enter"])},{default:n(()=>[o(s,{path:"phone"},{default:n(()=>[o(b,{value:l.phone,"onUpdate:value":p[0]||(p[0]=k=>l.phone=k),placeholder:e(a)("page.login.common.phonePlaceholder")},null,8,["value","placeholder"])]),_:1}),o(s,{path:"code"},{default:n(()=>[t("div",He,[o(b,{value:l.code,"onUpdate:value":p[1]||(p[1]=k=>l.code=k),placeholder:e(a)("page.login.common.codePlaceholder")},null,8,["value","placeholder"]),o(h,{size:"large",disabled:e(m),loading:e(y),onClick:p[2]||(p[2]=k=>e(g)(l.phone))},{default:n(()=>[$(v(e(i)),1)]),_:1},8,["disabled","loading"])])]),_:1}),o(s,{path:"password"},{default:n(()=>[o(b,{value:l.password,"onUpdate:value":p[3]||(p[3]=k=>l.password=k),type:"password","show-password-on":"click",placeholder:e(a)("page.login.common.passwordPlaceholder")},null,8,["value","placeholder"])]),_:1}),o(s,{path:"confirmPassword"},{default:n(()=>[o(b,{value:l.confirmPassword,"onUpdate:value":p[4]||(p[4]=k=>l.confirmPassword=k),type:"password","show-password-on":"click",placeholder:e(a)("page.login.common.confirmPasswordPlaceholder")},null,8,["value","placeholder"])]),_:1}),o(R,{vertical:"",size:18,class:"w-full"},{default:n(()=>[o(h,{type:"primary",size:"large",round:"",block:"",onClick:_},{default:n(()=>[$(v(e(a)("common.confirm")),1)]),_:1}),o(h,{size:"large",round:"",block:"",onClick:p[5]||(p[5]=k=>e(c)("pwd-login"))},{default:n(()=>[$(v(e(a)("page.login.common.back")),1)]),_:1})]),_:1})]),_:1},8,["model","rules"])}}}),Je=L({name:"ResetPwd",__name:"reset-pwd",setup(N){const{toggleLoginModule:c}=T(),{formRef:r,validate:d}=D(),i=O({phone:"",code:"",password:"",confirmPassword:""}),m=x(()=>{const{formRules:g,createConfirmPwdRule:l}=A();return{phone:g.phone,password:g.pwd,confirmPassword:l(i.password)}});async function y(){await d(),window.$message?.success(a("page.login.common.validateSuccess"))}return(g,l)=>{const u=E,_=W,C=K,p=q,b=j;return w(),P(b,{ref_key:"formRef",ref:r,model:i,rules:m.value,size:"large","show-label":!1,onKeyup:V(y,["enter"])},{default:n(()=>[o(_,{path:"phone"},{default:n(()=>[o(u,{value:i.phone,"onUpdate:value":l[0]||(l[0]=s=>i.phone=s),placeholder:e(a)("page.login.common.phonePlaceholder")},null,8,["value","placeholder"])]),_:1}),o(_,{path:"code"},{default:n(()=>[o(u,{value:i.code,"onUpdate:value":l[1]||(l[1]=s=>i.code=s),placeholder:e(a)("page.login.common.codePlaceholder")},null,8,["value","placeholder"])]),_:1}),o(_,{path:"password"},{default:n(()=>[o(u,{value:i.password,"onUpdate:value":l[2]||(l[2]=s=>i.password=s),type:"password","show-password-on":"click",placeholder:e(a)("page.login.common.passwordPlaceholder")},null,8,["value","placeholder"])]),_:1}),o(_,{path:"confirmPassword"},{default:n(()=>[o(u,{value:i.confirmPassword,"onUpdate:value":l[3]||(l[3]=s=>i.confirmPassword=s),type:"password","show-password-on":"click",placeholder:e(a)("page.login.common.confirmPasswordPlaceholder")},null,8,["value","placeholder"])]),_:1}),o(p,{vertical:"",size:18,class:"w-full"},{default:n(()=>[o(C,{type:"primary",size:"large",round:"",block:"",onClick:y},{default:n(()=>[$(v(e(a)("common.confirm")),1)]),_:1}),o(C,{size:"large",round:"",block:"",onClick:l[4]||(l[4]=s=>e(c)("pwd-login"))},{default:n(()=>[$(v(e(a)("page.login.common.back")),1)]),_:1})]),_:1})]),_:1},8,["model","rules"])}}}),Qe=L({name:"BindWechat",__name:"bind-wechat",setup(N){return(c,r)=>(w(),z("div"))}}),Xe={class:"w-400px lt-sm:w-300px"},Ye={class:"flex-y-center justify-between"},eo={class:"text-28px text-primary font-600 lt-sm:text-22px"},oo={class:"i-flex-col"},lo={class:"pt-24px"},no={class:"text-18px text-primary font-medium"},ao={class:"pt-24px"},po=L({name:"login",__name:"index",props:{module:{}},setup(N){const c=N,r=J(),d=ie(),i={"pwd-login":{label:F["pwd-login"],component:We},"code-login":{label:F["code-login"],component:qe},register:{label:F.register,component:Ze},"reset-pwd":{label:F["reset-pwd"],component:Je},"bind-wechat":{label:F["bind-wechat"],component:Qe}},m=x(()=>i[c.module||"pwd-login"]),y=x(()=>d.darkMode?Z(d.themeColor,600):d.themeColor),g=x(()=>{const l="#ffffff",u=d.darkMode?.5:.2;return ce(l,d.themeColor,u)});return(l,u)=>{const _=Ue,C=de,p=ue,b=pe,s=ge;return w(),z("div",{class:"relative size-full flex-center overflow-hidden",style:fe({backgroundColor:g.value})},[o(_,{"theme-color":y.value},null,8,["theme-color"]),o(s,{bordered:!1,class:"relative z-4 w-auto rd-12px"},{default:n(()=>[t("div",Xe,[t("header",Ye,[o(C,{class:"text-64px text-primary lt-sm:text-48px"}),t("h3",eo,v(e(a)("system.loginTitle")),1),t("div",oo,[o(p,{"theme-schema":e(d).themeScheme,"show-tooltip":!1,class:"text-20px lt-sm:text-18px",onSwitch:e(d).toggleThemeScheme},null,8,["theme-schema","onSwitch"]),e(d).header.multilingual.visible?(w(),P(b,{key:0,lang:e(r).locale,"lang-options":e(r).localeOptions,"show-tooltip":!1,onChangeLang:e(r).changeLocale},null,8,["lang","lang-options","onChangeLang"])):I("",!0)])]),t("main",lo,[t("h3",no,v(e(a)(m.value.label)),1),t("div",ao,[o(me,{name:e(d).page.animateMode,mode:"out-in",appear:""},{default:n(()=>[(w(),P(_e(m.value.component)))]),_:1},8,["name"])])])])]),_:1})],4)}}});export{po as default};
