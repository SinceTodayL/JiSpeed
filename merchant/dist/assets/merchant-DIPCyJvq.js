import{at as i}from"./index-CmHymj64.js";function l(e){return i({url:`/api/merchants/${e}`,method:"get"})}function d(e,t){const c=t?.endTime||new Date().toISOString(),m=t?.startTime||new Date(Date.now()-7*24*60*60*1e3).toISOString(),a=new URLSearchParams;return a.append("startTime",m),a.append("endTime",c),t?.minAmount!==void 0&&a.append("minAmount",t.minAmount.toString()),t?.maxAmount!==void 0&&a.append("maxAmount",t.maxAmount.toString()),t?.statType!==void 0&&a.append("statType",t.statType.toString()),t?.size!==void 0&&a.append("size",t.size.toString()),t?.page!==void 0&&a.append("page",t.page.toString()),i({url:`/api/merchants/${e}/SalesStat?${a.toString()}`,method:"get"})}function h(e,t){return i({url:`/api/merchants/${e}`,method:"patch",data:t})}function f(e){return i({url:"/api/merchants",method:"get",params:e})}function o(e,t){return i({url:`/api/merchants/${e}/SalesStat/${t}`,method:"get"})}async function S(e){try{const t=[],c=new Date;for(let n=0;n<30;n++){const s=new Date(c.getTime()-n*24*60*60*1e3).toISOString().split("T")[0];t.push(o(e,s).catch(()=>null))}const m=await Promise.all(t);let a=0;return m.forEach(n=>{if(n){const r=n;let s=0;r?.data?.salesAmount?s=r.data.salesAmount:r?.salesAmount&&(s=r.salesAmount),a+=s}}),a}catch(t){return console.warn(`获取商家${e}30天销售数据失败:`,t),0}}export{d as a,f as b,S as c,l as f,h as u};
