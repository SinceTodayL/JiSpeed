import{r as T,a as y,i as oe,j as le,d as R,k as J,b as L,o as v,e as t,l as ne,m as X,u as O,n as D,p as Q,$ as a,c as S,w as n,f as o,t as h,h as e,N as ae,F as Y,q as E,g as k,s as G,v as te,B as K,x as V,y as se,z as re,A as ie,C as ce,D as I,E as de,G as ue,H as pe,I as me,T as _e,J as ge,K as fe,L as he}from"./index-D4jBhmpn.js";import{u as A,a as W,R as ve}from"./form-C88og8_N.js";import{_ as j,a as q}from"./FormItem-D6oeNKH1.js";import{_ as we}from"./Alert-2p-sw0tb.js";import{N as H}from"./Space-DO3KNHCj.js";import{_ as be,a as ye}from"./RadioGroup-TRbPB1DA.js";function Ce(x){const d=T(0),i=y(()=>Math.ceil(d.value)),u=y(()=>d.value>0),{pause:c,resume:_}=oe(({delta:l})=>{if(d.value<=0){d.value=0,c();return}const p=l/1e3;d.value-=p,d.value<=0&&(d.value=0,c())},{immediate:!1});function w(l=x){d.value=l,_()}function g(){d.value=0,c()}return le(()=>{c()}),{count:i,isCounting:u,start:w,stop:g}}const xe={class:"absolute-lt z-1 size-full overflow-hidden"},Ne={class:"absolute -right-300px -top-900px lt-sm:-right-100px lt-sm:-top-1170px"},ke={height:"1337",width:"1337"},$e={id:"linearGradient-2",x1:"0.79",y1:"0.62",x2:"0.21",y2:"0.86"},Pe=["stop-color"],Se=["stop-color"],ze={class:"absolute -bottom-400px -left-200px lt-sm:-bottom-760px lt-sm:-left-100px"},Le={height:"896",width:"967.8852157128662"},Re={id:"linearGradient-3",x1:"0.5",y1:"0",x2:"0.5",y2:"1"},Me=["stop-color"],Ue=["stop-color"],Be=R({name:"WaveBg",__name:"wave-bg",props:{themeColor:{}},setup(x){const d=x,i=y(()=>J(d.themeColor,200)),u=y(()=>J(d.themeColor,500));return(c,_)=>(v(),L("div",xe,[t("div",Ne,[(v(),L("svg",ke,[t("defs",null,[_[0]||(_[0]=t("path",{id:"path-1",opacity:"1","fill-rule":"evenodd",d:"M1337,668.5 C1337,1037.455193874239 1037.455193874239,1337 668.5,1337 C523.6725684305388,1337 337,1236 370.50000000000006,1094 C434.03835568300906,824.6732385973953 6.906089672974592e-14,892.6277623047779 0,668.5000000000001 C0,299.5448061257611 299.5448061257609,1.1368683772161603e-13 668.4999999999999,0 C1037.455193874239,0 1337,299.544806125761 1337,668.5Z"},null,-1)),t("linearGradient",$e,[t("stop",{offset:"0","stop-color":i.value,"stop-opacity":"1"},null,8,Pe),t("stop",{offset:"1","stop-color":u.value,"stop-opacity":"1"},null,8,Se)])]),_[1]||(_[1]=t("g",{opacity:"1"},[t("use",{"xlink:href":"#path-1",fill:"url(#linearGradient-2)","fill-opacity":"1"})],-1))]))]),t("div",ze,[(v(),L("svg",Le,[t("defs",null,[_[2]||(_[2]=t("path",{id:"path-2",opacity:"1","fill-rule":"evenodd",d:"M896,448 C1142.6325445712241,465.5747656464056 695.2579309733121,896 448,896 C200.74206902668806,896 5.684341886080802e-14,695.2579309733121 0,448.0000000000001 C0,200.74206902668806 200.74206902668791,5.684341886080802e-14 447.99999999999994,0 C695.2579309733121,0 475,418 896,448Z"},null,-1)),t("linearGradient",Re,[t("stop",{offset:"0","stop-color":u.value,"stop-opacity":"1"},null,8,Me),t("stop",{offset:"1","stop-color":i.value,"stop-opacity":"1"},null,8,Ue)])]),_[3]||(_[3]=t("g",{opacity:"1"},[t("use",{"xlink:href":"#path-2",fill:"url(#linearGradient-3)","fill-opacity":"1"})],-1))]))])]))}}),Fe={class:"w-full"},Ie={class:"form-label"},Te={class:"w-full"},Ge={class:"form-label"},Oe={class:"w-full"},De={class:"form-label"},Ee={class:"w-full"},Ke={class:"form-label"},Ve={class:"w-full"},Ae={key:0,class:"flex-y-center justify-between"},We=R({name:"PwdLogin",__name:"pwd-login",setup(x){const d=ne(),i=X(),{toggleLoginModule:u}=O(),{formRef:c,validate:_}=A(),w=T("user"),g=T("username"),l=D({userName:"Soybean",password:"123456"}),p={user:{userName:"Soybean",password:"123456"},merchant:{userName:"test_1226",password:"123456"}};Q(w,r=>{const s=p[r];l.userName=s.userName,l.password=s.password},{immediate:!0});const f=y(()=>{const{formRules:r}=W();return{userName:r.userName,password:r.pwd}});async function b(){if(g.value!=="username"){u("code-login");return}await _(),await d.login(l.userName,l.password)}const m=y(()=>[{label:a("page.login.pwdLogin.user"),value:"user"},{label:i.locale==="zh-CN"?"骑手":"Rider",value:"rider"},{label:i.locale==="zh-CN"?"商家":"Merchant",value:"merchant"},{label:a("page.login.pwdLogin.admin"),value:"admin"}]),$=y(()=>[{label:i.locale==="zh-CN"?"用户名登录":"Username Login",value:"username"},{label:i.locale==="zh-CN"?"邮箱登录":"Email Login",value:"email"},{label:i.locale==="zh-CN"?"手机号登录":"Phone Login",value:"phone"}]);return Q(g,r=>{(r==="email"||r==="phone")&&setTimeout(()=>{u("code-login")},300)}),(r,s)=>{const M=ae,P=j,N=E,U=we,F=te,B=K,Z=H,C=q;return v(),S(C,{ref_key:"formRef",ref:c,model:l,rules:f.value,size:"large","show-label":!1,onKeyup:V(b,["enter"])},{default:n(()=>[o(P,null,{default:n(()=>[t("div",Fe,[t("label",Ie,h(e(a)("page.login.pwdLogin.loginRole")),1),o(M,{value:w.value,"onUpdate:value":s[0]||(s[0]=z=>w.value=z),options:m.value,placeholder:e(a)("page.login.common.selectRolePlaceholder")},null,8,["value","options","placeholder"])])]),_:1}),o(P,null,{default:n(()=>[t("div",Te,[t("label",Ge,h(e(a)("page.login.pwdLogin.loginMethod")),1),o(M,{value:g.value,"onUpdate:value":s[1]||(s[1]=z=>g.value=z),options:$.value,placeholder:e(a)("page.login.common.selectMethodPlaceholder")},null,8,["value","options","placeholder"])])]),_:1}),g.value==="username"?(v(),L(Y,{key:0},[o(P,{path:"userName"},{default:n(()=>[t("div",Oe,[t("label",De,h(e(i).locale==="zh-CN"?"用户名":"Username"),1),o(N,{value:l.userName,"onUpdate:value":s[2]||(s[2]=z=>l.userName=z),placeholder:e(a)("page.login.common.userNamePlaceholder")},null,8,["value","placeholder"])])]),_:1}),o(P,{path:"password"},{default:n(()=>[t("div",Ee,[t("label",Ke,h(e(i).locale==="zh-CN"?"密码":"Password"),1),o(N,{value:l.password,"onUpdate:value":s[3]||(s[3]=z=>l.password=z),type:"password","show-password-on":"click",placeholder:e(a)("page.login.common.passwordPlaceholder")},null,8,["value","placeholder"])])]),_:1})],64)):(v(),S(P,{key:1},{default:n(()=>[t("div",Ve,[o(U,{type:"info"},{default:n(()=>[k(h(g.value==="email"?e(i).locale==="zh-CN"?"将跳转到邮箱验证码登录页面":"Redirecting to email verification login page":e(i).locale==="zh-CN"?"将跳转到手机验证码登录页面":"Redirecting to phone verification login page"),1)]),_:1})])]),_:1})),o(Z,{vertical:"",size:18},{default:n(()=>[g.value==="username"?(v(),L("div",Ae,[o(F,null,{default:n(()=>[k(h(e(a)("page.login.pwdLogin.rememberMe")),1)]),_:1}),o(B,{quaternary:"",onClick:s[4]||(s[4]=z=>e(u)("reset-pwd"))},{default:n(()=>[k(h(e(a)("page.login.pwdLogin.forgetPassword")),1)]),_:1})])):G("",!0),o(B,{type:"primary",size:"large",round:"",block:"",loading:e(d).loginLoading,onClick:b},{default:n(()=>[k(h(g.value==="username"?e(a)("common.confirm"):e(i).locale==="zh-CN"?"继续":"Continue"),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["model","rules"])}}}),je=se(We,[["__scopeId","data-v-801ac601"]]);function ee(){const{loading:x,startLoading:d,endLoading:i}=re(),{count:u,start:c,stop:_,isCounting:w}=Ce(10),g=y(()=>{let f=a("page.login.codeLogin.getCode");const b=a("page.login.codeLogin.reGetCode",{time:u.value});return x.value&&(f=""),w.value&&(f=b),f});function l(f){return f.trim()===""?(window.$message?.error?.(a("form.phone.required")),!1):ve.test(f)?!0:(window.$message?.error?.(a("form.phone.invalid")),!1)}async function p(f){!l(f)||x.value||(d(),await new Promise(m=>{setTimeout(m,500)}),window.$message?.success?.(a("page.login.codeLogin.sendCodeSuccess")),c(),i())}return{label:g,start:c,stop:_,isCounting:w,loading:x,getCaptcha:p}}const qe={class:"w-full flex-y-center gap-16px"},He=R({name:"CodeLogin",__name:"code-login",setup(x){const{toggleLoginModule:d}=O(),{formRef:i,validate:u}=A(),{label:c,isCounting:_,loading:w,getCaptcha:g}=ee(),l=T("phone"),p=D({phone:"",email:"",code:""}),f=y(()=>{const{formRules:r}=W();return{phone:r.phone,email:r.email,code:r.code}}),b=y(()=>l.value==="phone"?p.phone:p.email);async function m(){await u(),window.$message?.success(a("page.login.common.validateSuccess"))}const $=y(()=>[{label:"手机号登录",value:"phone"},{label:"邮箱登录",value:"email"}]);return(r,s)=>{const M=ye,P=H,N=be,U=j,F=E,B=K,Z=q;return v(),S(Z,{ref_key:"formRef",ref:i,model:p,rules:f.value,size:"large","show-label":!1,onKeyup:V(m,["enter"])},{default:n(()=>[o(U,null,{default:n(()=>[o(N,{value:l.value,"onUpdate:value":s[0]||(s[0]=C=>l.value=C),class:"w-full"},{default:n(()=>[o(P,null,{default:n(()=>[(v(!0),L(Y,null,ie($.value,C=>(v(),S(M,{key:C.value,value:C.value},{default:n(()=>[k(h(C.label),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["value"])]),_:1}),l.value==="phone"?(v(),S(U,{key:0,path:"phone"},{default:n(()=>[o(F,{value:p.phone,"onUpdate:value":s[1]||(s[1]=C=>p.phone=C),placeholder:e(a)("page.login.common.phonePlaceholder")},null,8,["value","placeholder"])]),_:1})):G("",!0),l.value==="email"?(v(),S(U,{key:1,path:"email"},{default:n(()=>[o(F,{value:p.email,"onUpdate:value":s[2]||(s[2]=C=>p.email=C),placeholder:e(a)("page.login.common.emailPlaceholder")},null,8,["value","placeholder"])]),_:1})):G("",!0),o(U,{path:"code"},{default:n(()=>[t("div",qe,[o(F,{value:p.code,"onUpdate:value":s[3]||(s[3]=C=>p.code=C),placeholder:e(a)("page.login.common.codePlaceholder")},null,8,["value","placeholder"]),o(B,{size:"large",disabled:e(_),loading:e(w),onClick:s[4]||(s[4]=C=>e(g)(b.value))},{default:n(()=>[k(h(e(c)),1)]),_:1},8,["disabled","loading"])])]),_:1}),o(P,{vertical:"",size:18,class:"w-full"},{default:n(()=>[o(B,{type:"primary",size:"large",round:"",block:"",onClick:m},{default:n(()=>[k(h(e(a)("common.confirm")),1)]),_:1}),o(B,{size:"large",round:"",block:"",onClick:s[5]||(s[5]=C=>e(d)("pwd-login"))},{default:n(()=>[k(h(e(a)("page.login.common.back")),1)]),_:1})]),_:1})]),_:1},8,["model","rules"])}}}),Ze={class:"w-full flex-y-center gap-16px"},Je=R({name:"Register",__name:"register",setup(x){const{toggleLoginModule:d}=O(),{formRef:i,validate:u}=A(),{label:c,isCounting:_,loading:w,getCaptcha:g}=ee(),l=D({phone:"",code:"",password:"",confirmPassword:""}),p=y(()=>{const{formRules:b,createConfirmPwdRule:m}=W();return{phone:b.phone,code:b.code,password:b.pwd,confirmPassword:m(l.password)}});async function f(){await u(),window.$message?.success(a("page.login.common.validateSuccess"))}return(b,m)=>{const $=E,r=j,s=K,M=H,P=q;return v(),S(P,{ref_key:"formRef",ref:i,model:l,rules:p.value,size:"large","show-label":!1,onKeyup:V(f,["enter"])},{default:n(()=>[o(r,{path:"phone"},{default:n(()=>[o($,{value:l.phone,"onUpdate:value":m[0]||(m[0]=N=>l.phone=N),placeholder:e(a)("page.login.common.phonePlaceholder")},null,8,["value","placeholder"])]),_:1}),o(r,{path:"code"},{default:n(()=>[t("div",Ze,[o($,{value:l.code,"onUpdate:value":m[1]||(m[1]=N=>l.code=N),placeholder:e(a)("page.login.common.codePlaceholder")},null,8,["value","placeholder"]),o(s,{size:"large",disabled:e(_),loading:e(w),onClick:m[2]||(m[2]=N=>e(g)(l.phone))},{default:n(()=>[k(h(e(c)),1)]),_:1},8,["disabled","loading"])])]),_:1}),o(r,{path:"password"},{default:n(()=>[o($,{value:l.password,"onUpdate:value":m[3]||(m[3]=N=>l.password=N),type:"password","show-password-on":"click",placeholder:e(a)("page.login.common.passwordPlaceholder")},null,8,["value","placeholder"])]),_:1}),o(r,{path:"confirmPassword"},{default:n(()=>[o($,{value:l.confirmPassword,"onUpdate:value":m[4]||(m[4]=N=>l.confirmPassword=N),type:"password","show-password-on":"click",placeholder:e(a)("page.login.common.confirmPasswordPlaceholder")},null,8,["value","placeholder"])]),_:1}),o(M,{vertical:"",size:18,class:"w-full"},{default:n(()=>[o(s,{type:"primary",size:"large",round:"",block:"",onClick:f},{default:n(()=>[k(h(e(a)("common.confirm")),1)]),_:1}),o(s,{size:"large",round:"",block:"",onClick:m[5]||(m[5]=N=>e(d)("pwd-login"))},{default:n(()=>[k(h(e(a)("page.login.common.back")),1)]),_:1})]),_:1})]),_:1},8,["model","rules"])}}}),Qe=R({name:"ResetPwd",__name:"reset-pwd",setup(x){const{toggleLoginModule:d}=O(),{formRef:i,validate:u}=A(),c=D({phone:"",code:"",password:"",confirmPassword:""}),_=y(()=>{const{formRules:g,createConfirmPwdRule:l}=W();return{phone:g.phone,password:g.pwd,confirmPassword:l(c.password)}});async function w(){await u(),window.$message?.success(a("page.login.common.validateSuccess"))}return(g,l)=>{const p=E,f=j,b=K,m=H,$=q;return v(),S($,{ref_key:"formRef",ref:i,model:c,rules:_.value,size:"large","show-label":!1,onKeyup:V(w,["enter"])},{default:n(()=>[o(f,{path:"phone"},{default:n(()=>[o(p,{value:c.phone,"onUpdate:value":l[0]||(l[0]=r=>c.phone=r),placeholder:e(a)("page.login.common.phonePlaceholder")},null,8,["value","placeholder"])]),_:1}),o(f,{path:"code"},{default:n(()=>[o(p,{value:c.code,"onUpdate:value":l[1]||(l[1]=r=>c.code=r),placeholder:e(a)("page.login.common.codePlaceholder")},null,8,["value","placeholder"])]),_:1}),o(f,{path:"password"},{default:n(()=>[o(p,{value:c.password,"onUpdate:value":l[2]||(l[2]=r=>c.password=r),type:"password","show-password-on":"click",placeholder:e(a)("page.login.common.passwordPlaceholder")},null,8,["value","placeholder"])]),_:1}),o(f,{path:"confirmPassword"},{default:n(()=>[o(p,{value:c.confirmPassword,"onUpdate:value":l[3]||(l[3]=r=>c.confirmPassword=r),type:"password","show-password-on":"click",placeholder:e(a)("page.login.common.confirmPasswordPlaceholder")},null,8,["value","placeholder"])]),_:1}),o(m,{vertical:"",size:18,class:"w-full"},{default:n(()=>[o(b,{type:"primary",size:"large",round:"",block:"",onClick:w},{default:n(()=>[k(h(e(a)("common.confirm")),1)]),_:1}),o(b,{size:"large",round:"",block:"",onClick:l[4]||(l[4]=r=>e(d)("pwd-login"))},{default:n(()=>[k(h(e(a)("page.login.common.back")),1)]),_:1})]),_:1})]),_:1},8,["model","rules"])}}}),Xe=R({name:"BindWechat",__name:"bind-wechat",setup(x){return(d,i)=>(v(),L("div"))}}),Ye={class:"w-400px lt-sm:w-300px"},eo={class:"flex-y-center justify-between"},oo={class:"text-28px text-primary font-600 lt-sm:text-22px"},lo={class:"i-flex-col"},no={class:"pt-24px"},ao={class:"text-18px text-primary font-medium"},to={class:"pt-24px"},mo=R({name:"login",__name:"index",props:{module:{}},setup(x){const d=x,i=X(),u=ce(),c={"pwd-login":{label:I["pwd-login"],component:je},"code-login":{label:I["code-login"],component:He},register:{label:I.register,component:Je},"reset-pwd":{label:I["reset-pwd"],component:Qe},"bind-wechat":{label:I["bind-wechat"],component:Xe}},_=y(()=>c[d.module||"pwd-login"]),w=y(()=>u.darkMode?J(u.themeColor,600):u.themeColor),g=y(()=>{const l="#ffffff",p=u.darkMode?.5:.2;return de(l,u.themeColor,p)});return(l,p)=>{const f=Be,b=ue,m=pe,$=me,r=fe;return v(),L("div",{class:"relative size-full flex-center overflow-hidden",style:he({backgroundColor:g.value})},[o(f,{"theme-color":w.value},null,8,["theme-color"]),o(r,{bordered:!1,class:"relative z-4 w-auto rd-12px"},{default:n(()=>[t("div",Ye,[t("header",eo,[o(b,{class:"text-64px text-primary lt-sm:text-48px"}),t("h3",oo,h(e(a)("system.loginTitle")),1),t("div",lo,[o(m,{"theme-schema":e(u).themeScheme,"show-tooltip":!1,class:"text-20px lt-sm:text-18px",onSwitch:e(u).toggleThemeScheme},null,8,["theme-schema","onSwitch"]),e(u).header.multilingual.visible?(v(),S($,{key:0,lang:e(i).locale,"lang-options":e(i).localeOptions,"show-tooltip":!1,onChangeLang:e(i).changeLocale},null,8,["lang","lang-options","onChangeLang"])):G("",!0)])]),t("main",no,[t("h3",ao,h(e(a)(_.value.label)),1),t("div",to,[o(_e,{name:e(u).page.animateMode,mode:"out-in",appear:""},{default:n(()=>[(v(),S(ge(_.value.component)))]),_:1},8,["name"])])])])]),_:1})],4)}}});export{mo as default};
