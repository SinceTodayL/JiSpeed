import{L as B,d as M,b as R,o as C,e as l,O as ue,r as k,n as ce,a as V,P as me,f as e,w as s,Q as fe,h as p,J as ge,N as pe,R as ve,B as _e,g as x,t as v,s as xe,V as he,c as q,U as ye,a2 as u,X as be}from"./index-BeT-4ibA.js";import{W as F}from"./WalletOutline-BCy57Mm9.js";import{C as W}from"./CheckmarkCircleOutline-ChHTPvDy.js";import{T as H}from"./TimeOutline-BAYrgOE_.js";import{S as we}from"./StatsChartOutline-NOokKxOA.js";import{c as De,N as Se,S as ke,R as J,a as Ae,b as ze}from"./SearchOutline-CD5Toyr3.js";import{N as Ce,a as Ne}from"./Grid-B9fUT8JQ.js";import{b as Ie,N as $e,a as je}from"./FormItem-B7jt-Epf.js";import{_ as Fe}from"./DatePicker-CO7ONclJ.js";import{N as Re}from"./Spin-CHbul6eu.js";function Pe(g={}){const a={};return g.startDate&&(a.startDate=g.startDate),g.endDate&&(a.endDate=g.endDate),g.isSettled!==void 0&&(a.isSettled=g.isSettled),g.page&&(a.page=g.page),g.size?a.size=g.size:a.size=50,B("/api/settlements",a).then(r=>{const A=(r.data||r).map(y=>({...y,grossAmount:0,commissionFee:0,netAmount:0,statusText:y.settledAt?"已结算":"待结算"}));return{settlements:A,total:A.length}})}function Te(g){return g?B(`/api/settlements/${g}`).then(a=>{const r=a.data||a;return{...r,statusText:r.settledAt?"已结算":"待结算",commissionRate:r.grossAmount>0?r.commissionFee/r.grossAmount*100:0}}):Promise.reject(new Error("结算单ID不能为空"))}function Le(g,a={}){if(!g)return Promise.reject(new Error("商家ID不能为空"));const r={};return a.startDate&&(r.startDate=a.startDate),a.endDate&&(r.endDate=a.endDate),a.isSettled!==void 0&&(r.isSettled=a.isSettled),a.page&&(r.page=a.page),a.size?r.size=a.size:r.size=50,B(`/api/settlements/merchants/${g}`,r).then(N=>{const y=(N.data||N).map(c=>({...c,merchantId:g,grossAmount:0,commissionFee:0,netAmount:0,statusText:c.settledAt?"已结算":"待结算"}));return{settlements:y,total:y.length}})}const Ee={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Q=M({name:"CardOutline",render:function(a,r){return C(),R("svg",Ee,r[0]||(r[0]=[l("rect",{x:"48",y:"96",width:"416",height:"320",rx:"56",ry:"56",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),l("path",{fill:"none",stroke:"currentColor","stroke-linejoin":"round","stroke-width":"60",d:"M48 192h416"},null,-1),l("path",{fill:"none",stroke:"currentColor","stroke-linejoin":"round","stroke-width":"60",d:"M128 300h48v20h-48z"},null,-1)]))}}),Oe={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},O=M({name:"ReceiptOutline",render:function(a,r){return C(),R("svg",Oe,r[0]||(r[0]=[l("path",{fill:"none",stroke:"currentColor","stroke-linejoin":"round","stroke-width":"32",d:"M160 336V48l32 16l32-16l31.94 16l32.37-16L320 64l31.79-16l31.93 16L416 48l32.01 16L480 48v224"},null,-1),l("path",{d:"M480 272v112a80 80 0 0 1-80 80h0a80 80 0 0 1-80-80v-48H48a15.86 15.86 0 0 0-16 16c0 64 6.74 112 80 112h288",fill:"none",stroke:"currentColor","stroke-linejoin":"round","stroke-width":"32"},null,-1),l("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M224 144h192"},null,-1),l("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M288 224h128"},null,-1)]))}}),Be={class:"settlement-manage-container min-h-screen p-6"},Me={class:"mb-8"},Ue={class:"flex items-center gap-4 mb-2"},Ge={class:"flex items-center gap-2"},Ve={class:"flex items-center gap-3"},qe={class:"text-sm text-gray-500"},We={key:0,class:"space-y-6"},He={class:"bg-gradient-to-r from-purple-50 to-indigo-50 p-4 rounded-lg"},Je={class:"text-center"},Qe={class:"text-2xl font-bold text-purple-600"},Xe={class:"text-center"},Ke={class:"text-2xl font-bold text-blue-600"},Ye={class:"text-center"},Ze={class:"text-2xl font-bold text-orange-600"},et={class:"text-center"},tt={class:"text-xl font-bold text-green-600"},st={class:"space-y-4"},lt={class:"flex justify-between items-center py-2 border-b border-gray-100"},ot={class:"flex justify-between items-center py-2 border-b border-gray-100"},nt={class:"flex justify-between items-center py-2 border-b border-gray-100"},at={class:"text-right"},it={class:"text-sm font-medium"},rt={class:"text-xs text-gray-500"},dt={class:"flex justify-between items-center py-2 border-b border-gray-100"},ut={class:"flex justify-between items-center py-2"},ct={class:"space-y-4"},mt={class:"flex justify-between items-center py-2 border-b border-gray-100"},ft={class:"text-gray-600 font-medium flex items-center gap-2"},gt={class:"flex justify-between items-center py-2 border-b border-gray-100"},pt={class:"text-gray-600 font-medium flex items-center gap-2"},vt={class:"text-right"},_t={class:"text-xs text-gray-500"},xt={class:"flex justify-between items-center py-2 border-b border-gray-100"},ht={class:"text-gray-600 font-medium flex items-center gap-2"},yt={class:"flex justify-end gap-3 pt-4 border-t"},bt={key:1,class:"flex justify-center items-center h-80"},wt=M({name:"settlement-manage",__name:"index",setup(g){const a=ue(),r=k(!1),N=k(!1),A=k(!1),y=k([]),c=k({}),n=ce({merchantId:"",startDate:null,endDate:null,isSettled:null}),X=[{label:"全部",value:null},{label:"已结算",value:!0},{label:"待结算",value:!1}],E=V(()=>{let o=[...y.value];return n.merchantId&&(o=o.filter(t=>t.merchantId===n.merchantId)),n.startDate&&(o=o.filter(t=>new Date(t.periodStart||0).getTime()>=n.startDate)),n.endDate&&(o=o.filter(t=>new Date(t.periodEnd||0).getTime()<=n.endDate)),n.isSettled!==null&&(o=o.filter(t=>!!t.settledAt===n.isSettled)),o}),I=V(()=>{const o=E.value,t=o.filter(m=>m.settledAt),i=o.filter(m=>!m.settledAt),h=o.reduce((m,f)=>m+(f.grossAmount||0),0),_=o.reduce((m,f)=>m+(f.commissionFee||0),0),d=o.length>0?Number((o.reduce((m,f)=>m+(f.commissionRate||0),0)/o.length).toFixed(2)):0;return{total:o.length,settledCount:t.length,pendingCount:i.length,totalGrossAmount:h,totalCommissionFee:_,avgCommissionRate:d}}),K=[{title:"序号",key:"index",width:70,render:(o,t)=>t+1},{title:"结算单号",key:"settleId",width:180,ellipsis:{tooltip:!0},render:o=>u("div",{class:"space-y-1"},[u("div",{class:"font-mono text-xs text-blue-600"},o.settleId),u("div",{class:"text-xs text-gray-500"},`创建时间: ${T(o.periodStart,o.periodEnd)}`)])},{title:"结算周期",key:"period",width:160,render:o=>u("div",{class:"space-y-1"},[u("div",{class:"font-medium text-sm"},T(o.periodStart,o.periodEnd)),u("div",{class:"text-xs text-gray-500"},[u("div",`开始: ${o.periodStart?new Date(o.periodStart).toLocaleDateString("zh-CN"):"-"}`),u("div",`结束: ${o.periodEnd?new Date(o.periodEnd).toLocaleDateString("zh-CN"):"-"}`)])])},{title:"收入明细",key:"income",width:200,align:"right",render:o=>u("div",{class:"space-y-1 text-right"},[u("div",{class:"flex justify-between items-center"},[u("span",{class:"text-xs text-gray-500"},"毛收入:"),u("span",{class:"font-medium text-green-600"},`¥${w(o.grossAmount||0)}`)]),u("div",{class:"flex justify-between items-center"},[u("span",{class:"text-xs text-gray-500"},"抽佣:"),u("span",{class:"font-medium text-orange-600"},`¥${w(o.commissionFee||0)}`)]),u("div",{class:"flex justify-between items-center pt-1 border-t border-gray-200"},[u("span",{class:"text-xs text-gray-700 font-medium"},"应结:"),u("span",{class:"font-bold text-blue-600"},`¥${w(o.netAmount||0)}`)])])},{title:"抽佣信息",key:"commission",width:120,align:"center",render:o=>{const t=o.commissionRate||0;return u("div",{class:"space-y-1"},[u("div",{class:"text-lg font-bold text-purple-600"},`${t}%`),u("div",{class:"text-xs text-gray-500"},"平台抽佣率"),u("div",{class:"text-xs font-medium"},[`¥${w(o.commissionFee||0)}`])])}},{title:"状态与时间",key:"status",width:160,align:"center",render:o=>{const t=!!o.settledAt;return u("div",{class:"space-y-2"},[u("n-tag",{type:t?"success":"warning",size:"small"},()=>t?"已结算":"待结算"),u("div",{class:"text-xs text-gray-500"},[u("div","结算时间:"),u("div",{class:"font-medium"},o.settledAt?new Date(o.settledAt).toLocaleString("zh-CN"):"待结算")])])}}],w=o=>new Intl.NumberFormat("zh-CN",{minimumFractionDigits:2,maximumFractionDigits:2}).format(o),Y=o=>o?"success":"warning",Z=()=>{console.log("🔍 用户触发搜索操作",n),P(),a.success("搜索完成")},ee=()=>{console.log("🔄 用户触发重置操作，之前的搜索条件:",{...n}),Object.assign(n,{merchantId:"",startDate:null,endDate:null,isSettled:null}),console.log("🆕 重置后的搜索条件:",{...n}),P(),a.info("筛选条件已重置")},te=async()=>{console.log("🔄 用户触发刷新操作，当前搜索条件:",{...n}),await P(),a.success("数据已刷新")},P=async()=>{console.log("🔄 开始加载结算数据...");try{r.value=!0;const o={page:1,size:50};n.startDate&&(o.startDate=n.startDate),n.endDate&&(o.endDate=n.endDate),n.isSettled!==void 0&&n.isSettled!==null&&(o.isSettled=n.isSettled),console.log("📋 查询参数:",{merchant:n.merchantId?`商家ID: ${n.merchantId}`:"全部商家",dateRange:n.startDate&&n.endDate?`${n.startDate} ~ ${n.endDate}`:"全部时间",isSettled:n.isSettled!==void 0?n.isSettled?"已结算":"未结算":"全部状态",apiParams:o});let t,i;n.merchantId?(i="getSettlementsByMerchant",console.log(`🌐 调用API: ${i}`,{merchantId:n.merchantId,params:o}),D.value++,t=await Le(n.merchantId,o),S.value++):(i="getSettlements",console.log(`🌐 调用API: ${i}`,{params:o}),D.value++,t=await Pe(o),S.value++),console.log(`✅ ${i} API响应:`,{status:"success",dataCount:t.settlements?t.settlements.length:0,totalCount:t.total||0,response:t});const h=t.settlements||[];if(h.length===0){console.log("⚠️ 未获取到结算单数据"),y.value=[];return}console.log(`🔄 开始加载 ${h.length} 个结算单的详细信息...`);const _=await Promise.all(h.map(async(d,m)=>{try{console.log(`📝 [${m+1}/${h.length}] 加载结算单详情: ${d.settleId}`),D.value++;const f=await Te(d.settleId);S.value++,console.log(`✅ [${m+1}/${h.length}] 详情加载成功:`,{settleId:d.settleId,grossAmount:f.grossAmount,commissionFee:f.commissionFee,netAmount:f.netAmount});const j=f.grossAmount>0?f.commissionFee/f.grossAmount*100:0;return{...d,...f,commissionRate:j}}catch(f){return $.value++,console.error(`❌ [${m+1}/${h.length}] 获取结算单 ${d.settleId} 详情失败:`,{error:f.message||f,fullError:f}),{...d,grossAmount:0,commissionFee:0,netAmount:0,commissionRate:0}}}));console.log("🎉 所有结算单数据加载完成:",{总数量:_.length,成功加载详情:_.filter(d=>d.grossAmount>0||d.netAmount>0).length,详情加载失败:_.filter(d=>d.grossAmount===0&&d.netAmount===0).length,API调用统计:{总请求数:D.value,成功请求:S.value,失败请求:$.value}}),y.value=_}catch(o){$.value++,console.error("❌ 加载结算数据失败:",{错误信息:o.message||o,完整错误:o,搜索条件:n,API调用统计:{总请求数:D.value,成功请求:S.value,失败请求:$.value}}),a.error("加载结算数据失败")}finally{r.value=!1,console.log("🏁 结算数据加载流程结束",{最终数据条数:y.value.length,API调用统计:{总请求数:D.value,成功请求:S.value,失败请求:$.value,成功率:D.value>0?`${(S.value/D.value*100).toFixed(1)}%`:"N/A"}})}},T=(o,t)=>{if(!o||!t)return"-";const i=new Date(o),h=new Date(t),_=i.toLocaleDateString("zh-CN"),d=h.toLocaleDateString("zh-CN");return`${_} ~ ${d}`},D=k(0),S=k(0),$=k(0);return me(()=>{console.log("🚀 结算管理页面初始化，开始加载数据..."),console.log("📊 调试统计初始化:",{apiRequestCount:D.value,successfulApiCount:S.value,failedApiCount:$.value}),P()}),(o,t)=>{const i=fe,h=De,_=Se,d=ge,m=Ce,f=Ne,j=_e,U=je,se=pe,L=$e,G=Fe,le=ve,oe=Ie,z=ze,ne=Ae,ae=xe,ie=he,re=Re,de=ye;return C(),R("div",Be,[l("div",Me,[l("div",Ue,[e(h,{size:48,style:{background:"linear-gradient(135deg, #722ed1 0%, #531dab 100%)"}},{default:s(()=>[e(i,{size:"24"},{default:s(()=>[e(p(F))]),_:1})]),_:1}),t[6]||(t[6]=l("div",null,[l("h1",{class:"text-3xl font-bold text-gray-800"},"结算管理"),l("p",{class:"text-gray-600 mt-1"},"管理和查看平台所有结算记录")],-1))])]),e(f,{cols:6,"x-gap":16,"y-gap":16,class:"mb-6"},{default:s(()=>[e(m,null,{default:s(()=>[e(d,{bordered:!1,class:"shadow-sm hover:shadow-lg transition-shadow duration-300"},{default:s(()=>[e(_,{label:"结算单总数",value:I.value.total,"value-style":"color: #722ed1; font-weight: bold;"},{prefix:s(()=>[e(i,{size:"20",color:"#722ed1"},{default:s(()=>[e(p(O))]),_:1})]),_:1},8,["value"])]),_:1})]),_:1}),e(m,null,{default:s(()=>[e(d,{bordered:!1,class:"shadow-sm hover:shadow-lg transition-shadow duration-300"},{default:s(()=>[e(_,{label:"已结算",value:I.value.settledCount,"value-style":"color: #52c41a; font-weight: bold;"},{prefix:s(()=>[e(i,{size:"20",color:"#52c41a"},{default:s(()=>[e(p(W))]),_:1})]),_:1},8,["value"])]),_:1})]),_:1}),e(m,null,{default:s(()=>[e(d,{bordered:!1,class:"shadow-sm hover:shadow-lg transition-shadow duration-300"},{default:s(()=>[e(_,{label:"待结算",value:I.value.pendingCount,"value-style":"color: #faad14; font-weight: bold;"},{prefix:s(()=>[e(i,{size:"20",color:"#faad14"},{default:s(()=>[e(p(H))]),_:1})]),_:1},8,["value"])]),_:1})]),_:1}),e(m,null,{default:s(()=>[e(d,{bordered:!1,class:"shadow-sm hover:shadow-lg transition-shadow duration-300"},{default:s(()=>[e(_,{label:"总毛收入",value:w(I.value.totalGrossAmount),"value-style":"color: #52c41a; font-weight: bold;"},{prefix:s(()=>[e(i,{size:"20",color:"#52c41a"},{default:s(()=>[e(p(F))]),_:1})]),_:1},8,["value"])]),_:1})]),_:1}),e(m,null,{default:s(()=>[e(d,{bordered:!1,class:"shadow-sm hover:shadow-lg transition-shadow duration-300"},{default:s(()=>[e(_,{label:"总抽佣",value:w(I.value.totalCommissionFee),"value-style":"color: #fa8c16; font-weight: bold;"},{prefix:s(()=>[e(i,{size:"20",color:"#fa8c16"},{default:s(()=>[e(p(Q))]),_:1})]),_:1},8,["value"])]),_:1})]),_:1}),e(m,null,{default:s(()=>[e(d,{bordered:!1,class:"shadow-sm hover:shadow-lg transition-shadow duration-300"},{default:s(()=>[e(_,{label:"平均抽佣率",value:I.value.avgCommissionRate,"value-style":"color: #1890ff; font-weight: bold;"},{suffix:s(()=>t[7]||(t[7]=[l("span",{class:"text-sm text-gray-500"},"%",-1)])),prefix:s(()=>[e(i,{size:"20",color:"#1890ff"},{default:s(()=>[e(p(we))]),_:1})]),_:1},8,["value"])]),_:1})]),_:1})]),_:1}),e(d,{title:"筛选条件",class:"mb-6 shadow-sm",bordered:!1},{"header-extra":s(()=>[e(U,null,{default:s(()=>[e(j,{size:"small",onClick:Z,type:"primary"},{icon:s(()=>[e(i,null,{default:s(()=>[e(p(ke))]),_:1})]),default:s(()=>[t[8]||(t[8]=x(" 搜索 "))]),_:1,__:[8]}),e(j,{size:"small",onClick:ee},{icon:s(()=>[e(i,null,{default:s(()=>[e(p(J))]),_:1})]),default:s(()=>[t[9]||(t[9]=x(" 重置 "))]),_:1,__:[9]})]),_:1})]),default:s(()=>[e(oe,{model:n,inline:"","label-placement":"left","label-width":"80"},{default:s(()=>[e(L,{label:"商家ID"},{default:s(()=>[e(se,{value:n.merchantId,"onUpdate:value":t[0]||(t[0]=b=>n.merchantId=b),placeholder:"输入商家ID",clearable:"",style:{width:"200px"}},null,8,["value"])]),_:1}),e(L,{label:"起始日期"},{default:s(()=>[e(G,{value:n.startDate,"onUpdate:value":t[1]||(t[1]=b=>n.startDate=b),type:"date",placeholder:"选择起始日期",clearable:"",style:{width:"200px"}},null,8,["value"])]),_:1}),e(L,{label:"结束日期"},{default:s(()=>[e(G,{value:n.endDate,"onUpdate:value":t[2]||(t[2]=b=>n.endDate=b),type:"date",placeholder:"选择结束日期",clearable:"",style:{width:"200px"}},null,8,["value"])]),_:1}),e(L,{label:"结算状态"},{default:s(()=>[e(le,{value:n.isSettled,"onUpdate:value":t[3]||(t[3]=b=>n.isSettled=b),options:X,placeholder:"选择状态",clearable:"",style:{width:"150px"}},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1}),e(d,{bordered:!1,class:"shadow-sm"},{header:s(()=>[l("div",Ge,[e(i,{size:"18",color:"#722ed1"},{default:s(()=>[e(p(F))]),_:1}),t[10]||(t[10]=l("span",{class:"font-medium"},"结算单列表",-1))])]),"header-extra":s(()=>[e(U,{align:"center"},{default:s(()=>[e(z,{depth:"3"},{default:s(()=>[x(" 显示 "+v(E.value.length)+" / "+v(y.value.length)+" 条记录 ",1)]),_:1}),e(j,{size:"small",onClick:te,loading:r.value},{icon:s(()=>[e(i,null,{default:s(()=>[e(p(J))]),_:1})]),default:s(()=>[t[11]||(t[11]=x(" 刷新 "))]),_:1,__:[11]},8,["loading"])]),_:1})]),default:s(()=>[e(ne,{columns:K,data:E.value,loading:r.value,pagination:{pageSize:10,showSizePicker:!0,pageSizes:[5,10,15,20]},"flex-height":"",class:"min-h-500px","row-class-name":()=>"hover:bg-purple-50 transition-colors duration-200","row-props":()=>({style:"height: 80px;"})},null,8,["data","loading"])]),_:1}),e(de,{show:A.value,"onUpdate:show":t[5]||(t[5]=b=>A.value=b),preset:"card",style:{width:"900px","max-height":"85vh"},class:"rounded-2xl","mask-closable":!1},{header:s(()=>[l("div",Ve,[e(h,{size:40,style:{background:"linear-gradient(135deg, #722ed1 0%, #531dab 100%)"}},{default:s(()=>[e(i,{size:"20"},{default:s(()=>[e(p(F))]),_:1})]),_:1}),l("div",null,[t[12]||(t[12]=l("h3",{class:"text-lg font-semibold text-gray-800"}," 结算单详情 ",-1)),l("p",qe," 单号: "+v(c.value.settleId||"-"),1)])])]),default:s(()=>[N.value?(C(),R("div",bt,[e(re,{size:"large"},{description:s(()=>t[27]||(t[27]=[l("div",{class:"text-center mt-4"},[l("p",{class:"text-gray-600"},"正在加载结算单详情..."),l("p",{class:"text-sm text-gray-400 mt-1"},"请稍候片刻")],-1)])),_:1})])):(C(),R("div",We,[l("div",He,[e(f,{cols:4,"x-gap":20},{default:s(()=>[e(m,null,{default:s(()=>[l("div",Je,[l("div",Qe,v(c.value.statusText||"待结算"),1),t[13]||(t[13]=l("div",{class:"text-sm text-gray-600"},"结算状态",-1))])]),_:1}),e(m,null,{default:s(()=>[l("div",Xe,[l("div",Ke,v(T(c.value.periodStart,c.value.periodEnd)),1),t[14]||(t[14]=l("div",{class:"text-sm text-gray-600"},"结算周期",-1))])]),_:1}),e(m,null,{default:s(()=>[l("div",Ye,[l("div",Ze,v(c.value.commissionRate||0)+"% ",1),t[15]||(t[15]=l("div",{class:"text-sm text-gray-600"},"抽佣率",-1))])]),_:1}),e(m,null,{default:s(()=>[l("div",et,[l("div",tt,v(c.value.merchantName||"-"),1),t[16]||(t[16]=l("div",{class:"text-sm text-gray-600"},"商家名称",-1))])]),_:1})]),_:1})]),e(ae),e(f,{cols:2,"x-gap":24,"y-gap":20},{default:s(()=>[e(m,null,{default:s(()=>[e(d,{title:"基本信息",size:"small",class:"h-full"},{"header-extra":s(()=>[e(i,{color:"#722ed1"},{default:s(()=>[e(p(O))]),_:1})]),default:s(()=>[l("div",st,[l("div",lt,[t[17]||(t[17]=l("span",{class:"text-gray-600 font-medium"},"结算单号",-1)),e(z,{code:"",style:{"word-break":"break-all","max-width":"200px"}},{default:s(()=>[x(v(c.value.settleId||"-"),1)]),_:1})]),l("div",ot,[t[18]||(t[18]=l("span",{class:"text-gray-600 font-medium"},"商家名称",-1)),e(z,{strong:""},{default:s(()=>[x(v(c.value.merchantName||"-"),1)]),_:1})]),l("div",nt,[t[19]||(t[19]=l("span",{class:"text-gray-600 font-medium"},"结算周期",-1)),l("div",at,[l("div",it,v(T(c.value.periodStart,c.value.periodEnd)),1),l("div",rt,v(c.value.periodStart?new Date(c.value.periodStart).toLocaleDateString("zh-CN"):"")+" - "+v(c.value.periodEnd?new Date(c.value.periodEnd).toLocaleDateString("zh-CN"):""),1)])]),l("div",dt,[t[20]||(t[20]=l("span",{class:"text-gray-600 font-medium"},"结算状态",-1)),e(ie,{type:Y(c.value.settledAt),size:"small"},{icon:s(()=>[e(i,null,{default:s(()=>[c.value.settledAt?(C(),q(p(W),{key:0})):(C(),q(p(H),{key:1}))]),_:1})]),default:s(()=>[x(" "+v(c.value.statusText||"待结算"),1)]),_:1},8,["type"])]),l("div",ut,[t[21]||(t[21]=l("span",{class:"text-gray-600 font-medium"},"结算时间",-1)),e(z,null,{default:s(()=>[x(v(c.value.settledAt?new Date(c.value.settledAt).toLocaleString("zh-CN"):"待结算"),1)]),_:1})])])]),_:1})]),_:1}),e(m,null,{default:s(()=>[e(d,{title:"金额明细",size:"small",class:"h-full"},{"header-extra":s(()=>[e(i,{color:"#fa8c16"},{default:s(()=>[e(p(F))]),_:1})]),default:s(()=>[l("div",ct,[l("div",mt,[l("span",ft,[e(i,{size:"16",color:"#52c41a"},{default:s(()=>[e(p(F))]),_:1}),t[22]||(t[22]=x(" 毛收入 "))]),e(z,{strong:"",style:{color:"#52c41a","font-size":"16px"}},{default:s(()=>[x(" ¥"+v(w(c.value.grossAmount)),1)]),_:1})]),l("div",gt,[l("span",pt,[e(i,{size:"16",color:"#fa8c16"},{default:s(()=>[e(p(Q))]),_:1}),t[23]||(t[23]=x(" 平台抽佣 "))]),l("div",vt,[e(z,{strong:"",style:{color:"#fa8c16","font-size":"16px"}},{default:s(()=>[x(" ¥"+v(w(c.value.commissionFee)),1)]),_:1}),l("div",_t," ("+v(c.value.commissionRate||0)+"%) ",1)])]),l("div",xt,[l("span",ht,[e(i,{size:"16",color:"#1890ff"},{default:s(()=>[e(p(O))]),_:1}),t[24]||(t[24]=x(" 应结金额 "))]),e(z,{strong:"",style:{color:"#1890ff","font-size":"18px"}},{default:s(()=>[x(" ¥"+v(w(c.value.netAmount)),1)]),_:1})]),t[25]||(t[25]=l("div",{class:"bg-blue-50 p-3 rounded-lg mt-4"},[l("div",{class:"text-center"},[l("div",{class:"text-sm text-gray-600 mb-1"},"计算公式"),l("div",{class:"text-xs text-gray-500"}," 应结金额 = 毛收入 - 平台抽佣 ")])],-1))])]),_:1})]),_:1})]),_:1}),l("div",yt,[e(j,{size:"medium",onClick:t[4]||(t[4]=b=>A.value=!1)},{default:s(()=>t[26]||(t[26]=[x(" 关闭 ")])),_:1,__:[26]})])]))]),_:1},8,["show"])])}}}),Ft=be(wt,[["__scopeId","data-v-e492d353"]]);export{Ft as default};
//# sourceMappingURL=index-C5w3lIwC.js.map
