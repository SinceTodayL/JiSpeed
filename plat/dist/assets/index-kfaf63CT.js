import{f as be,b as Re,c as ke}from"./rider-DwEKRmL3.js";import{aB as F,aC as Ie,aD as Oe,d as le,g as y,a2 as L,al as ze,a as B,L as J,b as j,o as D,aA as Ne,X as ye,r as S,O as xe,P as _e,aE as Te,f as e,w as a,e as i,h as t,B as V,Q as h,R as Ce,t as T,J as P,aF as Q,N as Se,E as Me,c as X,F as ne,v as re,ae as De,s as oe,U as Ae}from"./index-BPGfaLpZ.js";import{N as $,b as I,a as we,R as ae,S as Pe,c as ie}from"./SearchOutline-h4e-WueY.js";import{g as de,m as ue,a as ce,b as fe,c as me,f as $e,d as je}from"./index-DfmAGgq8.js";import{a as G,N as C}from"./Grid-D64zesWF.js";import{_ as W}from"./Badge-Cwz1TmRm.js";import{B as Y}from"./BicycleOutline-B13PJAH9.js";import{S as q}from"./StatsChartOutline-C0ynpbRZ.js";import{T as ee}from"./TrophyOutline-hPrZAr2I.js";import{C as ge}from"./CallOutline-ByNXZhhr.js";import{P as te}from"./PersonOutline-1CXGZG5Z.js";import{b as Ue,N as Be,a as ve}from"./FormItem-uK_GGBtG.js";import{N as Le}from"./Spin-BnQB4IXW.js";function Fe(s,n){const m=F(s),u=F(n),f=m.getTime()-u.getTime();return f<0?-1:f>0?1:f}function Ee(s){return n=>{const u=(s?Math[s]:Math.trunc)(n);return u===0?0:u}}function Ve(s,n,m){const u=Ie(),f=m?.locale??u.locale??Oe,p=Fe(s,n);if(isNaN(p))throw new RangeError("Invalid time value");const g=Object.assign({},m,{addSuffix:m?.addSuffix,comparison:p});let o,N;p>0?(o=F(n),N=F(s)):(o=F(s),N=F(n));const d=Ee(m?.roundingMethod??"round"),v=N.getTime()-o.getTime(),w=v/me,A=de(N)-de(o),M=(v-A)/me,U=m?.unit;let R;if(U?R=U:w<1?R="second":w<60?R="minute":w<ue?R="hour":M<ce?R="day":M<fe?R="month":R="year",R==="second"){const O=d(v/1e3);return f.formatDistance("xSeconds",O,g)}else if(R==="minute"){const O=d(w);return f.formatDistance("xMinutes",O,g)}else if(R==="hour"){const O=d(w/60);return f.formatDistance("xHours",O,g)}else if(R==="day"){const O=d(M/ue);return f.formatDistance("xDays",O,g)}else if(R==="month"){const O=d(M/ce);return O===12&&U!=="month"?f.formatDistance("xYears",1,g):f.formatDistance("xMonths",O,g)}else{const O=d(M/fe);return f.formatDistance("xYears",O,g)}}function pe(s){return F(s*1e3)}const He={time:{type:[Number,Date],default:void 0},type:{type:String,default:"datetime"},to:{type:[Number,Date],default:void 0},unix:Boolean,format:String,text:Boolean,timeZone:String},Ye=le({name:"Time",props:He,setup(s){const n=Date.now(),{localeRef:m,dateLocaleRef:u}=ze("Time"),f=B(()=>{const{timeZone:d}=s;return d?(v,w,A)=>$e(v,d,w,A):je}),p=B(()=>({locale:u.value.locale})),g=B(()=>{const{time:d}=s;return s.unix?d===void 0?n:pe(typeof d=="number"?d:d.valueOf()):d??n}),o=B(()=>{const{to:d}=s;return s.unix?d===void 0?n:pe(typeof d=="number"?d:d.valueOf()):d??n});return{renderedTime:B(()=>s.format?f.value(g.value,s.format,p.value):s.type==="date"?f.value(g.value,m.value.dateFormat,p.value):s.type==="datetime"?f.value(g.value,m.value.dateTimeFormat,p.value):Ve(g.value,o.value,{addSuffix:!0,locale:u.value.locale}))}},render(){return this.text?y(this.renderedTime):L("time",[this.renderedTime])}});function Ge(s={}){return console.log("获取所有商家列表",s),J("/api/merchants",s)}function We(s,n={}){return console.log(`获取商家 ${s} 的订单列表`,n),J(`/api/merchants/${s}/orders`,n)}function Ze(s){return console.log(`获取骑手分配订单，骑手ID: ${s}`),J(`/api/OrderAssignment/rider/${s}/assignments`)}async function Je(s={}){console.log("获取订单列表",s);try{const n=await Ge({page:1,size:100});console.log("商家API响应:",n);const m=n?.data||[];if(!m.length)return{data:[],total:0};const u=m[0],f=u.MerchantId||u.merchantId,p=await We(f,{orderStatus:s.status,page:s.page||1,size:s.pageSize||20});return console.log("商家订单API响应:",p),{data:p?.data||[],total:p?.data?.length||0}}catch(n){throw console.error("获取订单列表失败:",n),n}}async function Ke(){console.log("获取订单分配总览数据");try{const s=await J("/api/riders",{page:1,size:1e3});console.log("获取骑手列表响应:",s);let n=[];s?.data?.Riders?n=s.data.Riders:s?.data&&Array.isArray(s.data)?n=s.data:(console.warn("骑手数据格式不符合预期:",s),n=[]);const m=await Qe(),u=n.slice(0,20),f=await Promise.all(u.map(async o=>{try{const d=(await Ze(o.RiderId||o.riderId))?.data||[],v=Math.floor(Math.random()*10),w=Math.floor(Math.random()*20)+15;return{riderId:o.RiderId||o.riderId,riderName:o.Name||o.name||`骑手${o.RiderId||o.riderId}`,status:Xe(),currentOrders:Array.isArray(d)?d.length:0,todayCompleted:v,avgDeliveryTime:w,lastOrderTime:Array.isArray(d)&&d.length>0?d[0]?.assignedAt:null,location:"位置未知"}}catch(N){return console.warn(`获取骑手 ${o.RiderId||o.riderId} 数据失败:`,N),{riderId:o.RiderId||o.riderId,riderName:o.Name||o.name||`骑手${o.RiderId||o.riderId}`,status:"离线",currentOrders:0,todayCompleted:0,avgDeliveryTime:0,lastOrderTime:null,location:"位置未知"}}})),p=n.slice(20).map(o=>({riderId:o.RiderId||o.riderId,riderName:o.Name||o.name||`骑手${o.RiderId||o.riderId}`,status:"离线",currentOrders:0,todayCompleted:0,avgDeliveryTime:0,lastOrderTime:null,location:"位置未知"})),g=[...f,...p];return{orderStats:m,ridersOverview:g}}catch(s){throw console.error("获取订单分配总览失败:",s),s}}async function Qe(){try{console.log("开始获取订单统计数据...");const s=await Je({page:1,pageSize:1});console.log("订单API响应:",s);let n=0;s?.total?n=s.total:s?.data?.length!==void 0&&(n=s.data.length);const m=Math.floor(n*.3),u=Math.floor(n*.2),f=Math.floor(n*.4),p=n>0?((m+u)/n*100).toFixed(1):"0.0",g={totalOrders:n,assigned:m+u,delivering:u,completed:f,assignmentRate:parseFloat(p)};return console.log("计算出的订单统计:",g),g}catch(s){return console.error("获取订单统计失败:",s),{totalOrders:0,assigned:0,delivering:0,completed:0,assignmentRate:0}}}function Xe(){const s=["空闲","配送中","离线"];return s[Math.floor(Math.random()*s.length)]}const qe={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},he=le({name:"CarOutline",render:function(n,m){return D(),j("svg",qe,m[0]||(m[0]=[Ne('<path d="M80 224l37.78-88.15C123.93 121.5 139.6 112 157.11 112h197.78c17.51 0 33.18 9.5 39.33 23.85L432 224" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M80 224h352v144H80z"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M112 368v32H80v-32"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M432 368v32h-32v-32"></path><circle cx="144" cy="288" r="16" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32"></circle><circle cx="368" cy="288" r="16" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32"></circle>',6)]))}}),et={class:"order-overview"},tt={class:"flex items-center gap-3"},at={class:"mb-6"},lt={__name:"OrderOverview",props:{autoRefresh:{type:Boolean,default:!0},refreshInterval:{type:Number,default:3e4}},setup(s){const n=s,m=S(!1),u=S(null),f=S("all"),p=xe(),g=S({totalOrders:0,assigned:0,delivering:0,completed:0,assignmentRate:0}),o=S([]),N=[{label:"全部状态",value:"all"},{label:"空闲",value:"空闲"},{label:"配送中",value:"配送中"},{label:"离线",value:"离线"}],d=B(()=>f.value==="all"?o.value:o.value.filter(c=>c.status===f.value)),v=[{title:"骑手ID",key:"riderId",width:100,fixed:"left"},{title:"骑手姓名",key:"riderName",width:120,fixed:"left"},{title:"当前状态",key:"status",width:100,render(c){const E={空闲:{type:"success",text:"空闲"},配送中:{type:"warning",text:"配送中"},离线:{type:"error",text:"离线"}}[c.status]||{type:"default",text:"未知"};return L(W,{type:E.type,text:E.text})}},{title:"当前订单",key:"currentOrders",width:100,render(c){return L("span",{style:{fontWeight:"bold",color:c.currentOrders>0?"#f0a020":"#666"}},`${c.currentOrders||0} 单`)}},{title:"今日完成",key:"todayCompleted",width:100,render(c){return L("span",{style:{color:"#18a058"}},`${c.todayCompleted||0} 单`)}},{title:"平均配送时间",key:"avgDeliveryTime",width:120,render(c){return c.avgDeliveryTime?`${c.avgDeliveryTime} 分钟`:"-"}},{title:"最近订单时间",key:"lastOrderTime",width:160,render(c){return c.lastOrderTime?L(Ye,{time:new Date(c.lastOrderTime),format:"MM-dd HH:mm"}):"-"}},{title:"位置信息",key:"location",width:150,render(c){return c.location||"位置未知"}},{title:"操作",key:"actions",width:120,fixed:"right",render(c){return L("div",{class:"flex gap-2"},[L(V,{size:"small",type:"primary",onClick:()=>R(c.riderId)},"查看详情")])}}],w={pageSize:15,showSizePicker:!0,pageSizes:[10,15,20,50],showQuickJumper:!0,prefix:({itemCount:c})=>`共 ${c} 个骑手`};let A=null;const M=async()=>{if(!m.value){m.value=!0,u.value=new Date;try{console.log("刷新订单分配总览数据...");const c=await Ke();g.value=c.orderStats,o.value=c.ridersOverview,console.log("数据刷新完成",{orderStats:g.value,ridersCount:o.value.length})}catch(c){console.error("刷新数据失败:",c),g.value={totalOrders:0,assigned:0,delivering:0,completed:0,assignmentRate:0},o.value=[];let x="获取订单数据失败";c.response?.status===401?x="认证失败，请重新登录":c.response?.status===404?x="API接口不存在，请联系管理员":c.response?.status>=500?x="服务器内部错误，请稍后重试":c.code==="NETWORK_ERROR"&&(x="网络连接失败，请检查网络设置"),p.error(x)}finally{m.value=!1}}},U=()=>{console.log("筛选状态改变:",f.value)},R=c=>{console.log("查看骑手详情:",c),p.info(`查看骑手 ${c} 的详细信息`)},O=()=>{n.autoRefresh&&n.refreshInterval>0&&(A=setInterval(()=>{M()},n.refreshInterval),console.log(`已启动自动刷新，间隔: ${n.refreshInterval/1e3}秒`))},K=()=>{A&&(clearInterval(A),A=null,console.log("已停止自动刷新"))};return _e(()=>{M(),O()}),Te(()=>{K()}),(c,x)=>(D(),j("div",et,[e(t(P),{title:"订单分配总览",class:"mb-4"},{"header-extra":a(()=>[i("div",tt,[e(t(V),{type:"primary",size:"small",loading:m.value,onClick:M},{icon:a(()=>[e(t(h),null,{default:a(()=>[e(t(ae))]),_:1})]),default:a(()=>[x[1]||(x[1]=y(" 刷新 "))]),_:1,__:[1]},8,["loading"]),e(t(Ce),{value:f.value,"onUpdate:value":[x[0]||(x[0]=E=>f.value=E),U],options:N,placeholder:"筛选状态",style:{width:"120px"},size:"small"},null,8,["value"]),e(t(I),{depth:"3",style:{"font-size":"12px"}},{default:a(()=>[y(" 最后更新: "+T(u.value?u.value.toLocaleTimeString():"-"),1)]),_:1})])]),default:a(()=>[i("div",at,[e(t(G),{cols:"5","x-gap":"16"},{default:a(()=>[e(t(C),null,{default:a(()=>[e(t($),{label:"总订单数",value:g.value.totalOrders},{suffix:a(()=>[e(t(I),{type:"info"},{default:a(()=>x[2]||(x[2]=[y("单")])),_:1,__:[2]})]),_:1},8,["value"])]),_:1}),e(t(C),null,{default:a(()=>[e(t($),{label:"已分配",value:g.value.assigned},{suffix:a(()=>[e(t(I),{type:"success"},{default:a(()=>x[3]||(x[3]=[y("单")])),_:1,__:[3]})]),_:1},8,["value"])]),_:1}),e(t(C),null,{default:a(()=>[e(t($),{label:"配送中",value:g.value.delivering},{suffix:a(()=>[e(t(I),{type:"warning"},{default:a(()=>x[4]||(x[4]=[y("单")])),_:1,__:[4]})]),_:1},8,["value"])]),_:1}),e(t(C),null,{default:a(()=>[e(t($),{label:"今日完成",value:g.value.completed},{suffix:a(()=>[e(t(I),{type:"success"},{default:a(()=>x[5]||(x[5]=[y("单")])),_:1,__:[5]})]),_:1},8,["value"])]),_:1}),e(t(C),null,{default:a(()=>[e(t($),{label:"分配率",value:g.value.assignmentRate},{suffix:a(()=>[e(t(I),{type:"info"},{default:a(()=>x[6]||(x[6]=[y("%")])),_:1,__:[6]})]),_:1},8,["value"])]),_:1})]),_:1})]),e(t(we),{columns:v,data:d.value,loading:m.value,pagination:w,"flex-height":"",striped:"",size:"small","scroll-x":1200,style:{height:"400px"}},null,8,["data","loading"])]),_:1})]))}},st=ye(lt,[["__scopeId","data-v-1d56feb4"]]),nt={class:"p-6 min-h-full bg-gradient-to-br from-orange-50 to-yellow-50"},rt={class:"mb-6"},ot={class:"text-2xl font-bold text-gray-800 mb-2 flex items-center gap-2"},it={class:"flex items-center gap-2"},dt={class:"flex items-center gap-3"},ut={class:"text-lg font-semibold text-gray-800"},ct={class:"text-sm text-gray-500"},ft={key:0,class:"space-y-6"},mt={class:"bg-gradient-to-r from-orange-50 to-yellow-50 p-4 rounded-lg"},gt={class:"text-gray-800 font-medium mb-4 flex items-center gap-2"},vt={class:"text-center"},pt={class:"text-sm text-gray-600"},ht={key:1,class:"text-center py-8"},yt={class:"space-y-4"},xt={class:"flex justify-between items-center py-2 border-b border-gray-100"},_t={class:"flex justify-between items-center py-2 border-b border-gray-100"},wt={class:"flex justify-between items-center py-2 border-b border-gray-100"},bt={class:"text-gray-600 font-medium flex items-center gap-2"},Rt={class:"flex justify-between items-center py-2"},kt={class:"text-gray-600 font-medium flex items-center gap-2"},It={class:"space-y-4"},Ot={class:"flex justify-between items-start py-2 border-b border-gray-100"},zt={class:"flex justify-between items-center py-2 border-b border-gray-100"},Nt={class:"flex justify-between items-center py-2"},Tt={key:0},Ct={class:"flex items-center justify-between p-3 bg-gray-50 rounded-lg"},St={class:"flex items-center gap-2"},Mt={class:"text-gray-700 font-medium"},Dt={key:1,class:"flex justify-center items-center h-80"},At=le({name:"rider-manage",__name:"index",setup(s){const n=xe(),m=S(!1),u=S([]),f=S({page:1,pageSize:20,totalCount:0,totalPages:0}),p=S({searchTerm:"",page:1,pageSize:20}),g=B(()=>{const r=u.value.length,l=u.value.filter(_=>_.status===1).length,b=u.value.filter(_=>_.status===0).length,k=u.value.filter(_=>_.status===2).length,z=u.value.filter(_=>_.vehicleNumber).length;return{total:r,onlineCount:l,offlineCount:b,busyCount:k,withVehicle:z,onlineRate:r>0?Math.round(l/r*100):0,vehicleRate:r>0?Math.round(z/r*100):0}}),o=B(()=>u.value.filter(r=>{if(p.value.searchTerm){const l=p.value.searchTerm.toLowerCase();if(!r.name?.toLowerCase().includes(l)&&!r.phoneNumber?.toLowerCase().includes(l))return!1}return!0})),N=S(!1),d=S(!1),v=S({}),w=S({}),A=new Date,M=A.getFullYear(),U=A.getMonth()+1;async function R(){try{m.value=!0;const r={page:p.value.page,pageSize:p.value.pageSize};p.value.searchTerm&&(r.searchTerm=p.value.searchTerm),console.log("🚀 开始请求骑手列表，参数:",r);const l=await be(r);if(console.log("📥 收到骑手列表响应:",l),l&&l.data){console.log("详细的响应数据结构:",l.data);let b=null,k=null;l.data.Riders&&Array.isArray(l.data.Riders)?(b=l.data.Riders,k=l.data.Pagination):l.data.riders&&Array.isArray(l.data.riders)?(b=l.data.riders,k=l.data.pagination):Array.isArray(l.data)&&(b=l.data,k=null),console.log("解析出的骑手数据:",b),console.log("解析出的分页信息:",k),b&&Array.isArray(b)?(u.value=b.map((z,_)=>({...z,index:(f.value.page-1)*f.value.pageSize+_+1,riderId:z.riderId||z.RiderId||"-",name:z.name||z.Name||"-",phoneNumber:z.phoneNumber||z.PhoneNumber||"-",vehicleNumber:z.vehicleNumber||z.VehicleNumber||"-",applicationUserId:z.applicationUserId||z.ApplicationUserId||"-"})),console.log("处理后的表格数据:",u.value),k?f.value={page:k.page||k.Page||1,pageSize:k.pageSize||k.PageSize||20,totalCount:k.totalCount||k.TotalCount||0,totalPages:k.totalPages||k.TotalPages||0}:(f.value.totalCount=b.length,f.value.totalPages=Math.ceil(b.length/f.value.pageSize))):(console.log("没有找到有效的骑手数据数组"),u.value=[])}else n.error(l?.message||"获取骑手列表失败"),u.value=[]}catch(r){n.error("获取骑手列表失败: "+r.message),u.value=[],console.error("Error fetching riders list:",r)}finally{m.value=!1}}function O(){n.success(`找到 ${o.value.length} 名骑手`)}function K(){p.value={searchTerm:"",status:null,page:1,pageSize:20},n.info("搜索条件已重置")}function c(){n.info("正在刷新骑手数据..."),R()}const x=[{key:"index",title:"序号",align:"center",width:70,render:(r,l)=>e(W,{value:l+1,type:"warning"},null)},{key:"riderInfo",title:"骑手信息",width:220,render:r=>e("div",{class:"flex items-center gap-12px"},[e(ie,{size:"medium",style:{backgroundColor:r.status===1?"#fa8c16":r.status===0?"#d9d9d9":"#faad14"}},{default:()=>[e(h,null,{default:()=>[e(Y,null,null)]})]}),e("div",{class:"flex flex-col"},[e(I,{strong:!0},{default:()=>[r.name||"未设置姓名"]}),e(I,{depth:"3",style:"font-size: 12px;"},{default:()=>[y("ID: "),r.riderId?.slice(-8)||"-"]})])])},{key:"contactInfo",title:"联系方式",align:"center",width:140,render:r=>e("div",{class:"flex items-center justify-center gap-4px"},[e(h,{color:"#1890ff",size:"14"},{default:()=>[e(ge,null,null)]}),e(I,{style:"font-size: 12px;"},{default:()=>[r.phoneNumber||"未提供"]})])},{key:"vehicleInfo",title:"车辆信息",align:"center",width:140,render:r=>e("div",{class:"flex items-center justify-center gap-4px"},[e(h,{color:r.vehicleNumber?"#52c41a":"#d9d9d9",size:"14"},{default:()=>[e(he,null,null)]}),e(I,{style:"font-size: 12px;"},{default:()=>[r.vehicleNumber||"未登记"]})])},{key:"userAccount",title:"关联账户",align:"center",width:140,render:r=>e("div",{class:"flex items-center justify-center gap-4px"},[e(h,{color:"#722ed1",size:"14"},{default:()=>[e(te,null,null)]}),e(I,{style:"font-size: 12px; word-break: break-all;",depth:"3"},{default:()=>[r.applicationUserId?.slice(-8)||"未关联"]})])},{key:"actions",title:"操作",align:"center",width:140,render:r=>e(V,{type:"primary",size:"small",onClick:()=>E(r.riderId),style:"border-radius: 6px; background: linear-gradient(135deg, #fa8c16, #faad14);"},{default:()=>[e("div",{style:"display: flex; align-items: center; gap: 4px;"},[e(h,{size:"14"},{default:()=>[e(ee,null,null)]}),y("查看绩效")])]})}];async function E(r){try{d.value=!0,N.value=!0,v.value={},w.value={},console.log(`获取骑手详情和绩效排名，ID: ${r}`);const[l,b]=await Promise.allSettled([Re(r),ke(r,M,U)]);l.status==="fulfilled"&&l.value?.data?(v.value=l.value.data,console.log("骑手详情:",v.value)):console.error("获取骑手详情失败:",l),b.status==="fulfilled"&&b.value?.data?(w.value=b.value.data,console.log("骑手绩效排名:",w.value)):console.error("获取骑手绩效排名失败:",b)}catch(l){console.error("获取骑手信息失败:",l),n.error("获取骑手信息失败: "+(l.message||"未知错误")),N.value=!1}finally{d.value=!1}}function se(r){return{totalOrdersRanking:"总订单排名",onTimeRateRanking:"准时率排名",goodReviewRateRanking:"好评率排名",incomeRanking:"收入排名",TotalOrdersRanking:"总订单排名",OnTimeRateRanking:"准时率排名",GoodReviewRateRanking:"好评率排名",IncomeRanking:"收入排名",IncomeRank:"收入排名",OnTimeRateRank:"准时率排名",GoodReviewRateRank:"好评率排名",TotalOrdersRank:"总订单排名"}[r]||r}function Z(r){return r<=3?"success":r<=10?"warning":"info"}return _e(()=>{R()}),(r,l)=>{const b=Q("FlashOutline"),k=Q("PauseCircleOutline"),z=Q("TimeOutline");return D(),j("div",nt,[i("div",rt,[i("h1",ot,[e(t(h),{size:"24",color:"#fa8c16"},{default:a(()=>[e(t(Y))]),_:1}),l[2]||(l[2]=y(" 骑手管理中心 "))]),l[3]||(l[3]=i("p",{class:"text-gray-600"},"管理骑手信息和绩效排名",-1))]),e(t(G),{cols:5,"x-gap":16,"y-gap":16,class:"mb-6"},{default:a(()=>[e(t(C),null,{default:a(()=>[e(t(P),{bordered:!1,class:"shadow-sm hover:shadow-lg transition-shadow duration-300"},{default:a(()=>[e(t($),{label:"总骑手数",value:g.value.total,"value-style":"color: #fa8c16; font-weight: bold;"},{prefix:a(()=>[e(t(h),{size:"20",color:"#fa8c16"},{default:a(()=>[e(t(Y))]),_:1})]),_:1},8,["value"])]),_:1})]),_:1}),e(t(C),null,{default:a(()=>[e(t(P),{bordered:!1,class:"shadow-sm hover:shadow-lg transition-shadow duration-300"},{default:a(()=>[e(t($),{label:"在线配送",value:g.value.onlineCount,"value-style":"color: #fa8c16; font-weight: bold;"},{prefix:a(()=>[e(t(h),{size:"20",color:"#fa8c16"},{default:a(()=>[e(b)]),_:1})]),_:1},8,["value"])]),_:1})]),_:1}),e(t(C),null,{default:a(()=>[e(t(P),{bordered:!1,class:"shadow-sm hover:shadow-lg transition-shadow duration-300"},{default:a(()=>[e(t($),{label:"离线休息",value:g.value.offlineCount,"value-style":"color: #d9d9d9; font-weight: bold;"},{prefix:a(()=>[e(t(h),{size:"20",color:"#d9d9d9"},{default:a(()=>[e(k)]),_:1})]),_:1},8,["value"])]),_:1})]),_:1}),e(t(C),null,{default:a(()=>[e(t(P),{bordered:!1,class:"shadow-sm hover:shadow-lg transition-shadow duration-300"},{default:a(()=>[e(t($),{label:"忙碌配送",value:g.value.busyCount,"value-style":"color: #ff4d4f; font-weight: bold;"},{prefix:a(()=>[e(t(h),{size:"20",color:"#ff4d4f"},{default:a(()=>[e(z)]),_:1})]),_:1},8,["value"])]),_:1})]),_:1}),e(t(C),null,{default:a(()=>[e(t(P),{bordered:!1,class:"shadow-sm hover:shadow-lg transition-shadow duration-300"},{default:a(()=>[e(t($),{label:"在线率",value:g.value.onlineRate,"value-style":"color: #52c41a; font-weight: bold;"},{suffix:a(()=>l[4]||(l[4]=[i("span",{class:"text-sm text-gray-500"},"%",-1)])),prefix:a(()=>[e(t(h),{size:"20",color:"#52c41a"},{default:a(()=>[e(t(q))]),_:1})]),_:1},8,["value"])]),_:1})]),_:1})]),_:1}),e(st,{"auto-refresh":!0,"refresh-interval":3e4,class:"mb-6"}),e(t(P),{title:"筛选条件",class:"mb-6 shadow-sm",bordered:!1},{"header-extra":a(()=>[e(t(ve),null,{default:a(()=>[e(t(V),{size:"small",onClick:O,type:"primary"},{icon:a(()=>[e(t(h),null,{default:a(()=>[e(t(Pe))]),_:1})]),default:a(()=>[l[5]||(l[5]=y(" 搜索 "))]),_:1,__:[5]}),e(t(V),{size:"small",onClick:K},{icon:a(()=>[e(t(h),null,{default:a(()=>[e(t(ae))]),_:1})]),default:a(()=>[l[6]||(l[6]=y(" 重置 "))]),_:1,__:[6]})]),_:1})]),default:a(()=>[e(t(Ue),{model:p.value,inline:"","label-placement":"left","label-width":"80"},{default:a(()=>[e(t(Be),{label:"搜索条件"},{default:a(()=>[e(t(Se),{value:p.value.searchTerm,"onUpdate:value":l[0]||(l[0]=_=>p.value.searchTerm=_),placeholder:"请输入骑手姓名或手机号",clearable:"",style:{width:"250px"}},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1}),e(t(P),{bordered:!1,class:"shadow-sm"},{header:a(()=>[i("div",it,[e(t(h),{size:"18",color:"#fa8c16"},{default:a(()=>[e(t(Y))]),_:1}),l[7]||(l[7]=i("span",{class:"font-medium"},"骑手列表",-1))])]),"header-extra":a(()=>[e(t(ve),{align:"center"},{default:a(()=>[e(t(I),{depth:"3"},{default:a(()=>[y(" 显示 "+T(o.value.length)+" / "+T(u.value.length)+" 条记录 ",1)]),_:1}),e(t(V),{size:"small",onClick:c,loading:m.value},{icon:a(()=>[e(t(h),null,{default:a(()=>[e(t(ae))]),_:1})]),default:a(()=>[l[8]||(l[8]=y(" 刷新 "))]),_:1,__:[8]},8,["loading"])]),_:1})]),default:a(()=>[e(t(we),{columns:x,data:o.value,loading:m.value,pagination:{pageSize:10,showSizePicker:!0,pageSizes:[10,20,50]},"flex-height":"",class:"min-h-400px","row-class-name":()=>"hover:bg-orange-50 transition-colors duration-200"},null,8,["data","loading"])]),_:1}),e(t(Ae),{show:N.value,"onUpdate:show":l[1]||(l[1]=_=>N.value=_),preset:"card",style:{width:"900px","max-height":"80vh"},class:"rounded-2xl","mask-closable":!1},{header:a(()=>[i("div",dt,[e(t(ie),{size:40,style:{background:"linear-gradient(135deg, #fa8c16, #faad14)"}},{default:a(()=>[e(t(h),{size:"20"},{default:a(()=>[e(t(Y))]),_:1})]),_:1}),i("div",null,[i("h3",ut,T(v.value.name||v.value.Name||"骑手绩效信息"),1),i("p",ct," ID: "+T(v.value.riderId||v.value.RiderId||"-"),1)])])]),default:a(()=>[d.value?(D(),j("div",Dt,[e(t(Le),{size:"large"},{description:a(()=>l[18]||(l[18]=[i("div",{class:"text-center mt-4"},[i("p",{class:"text-gray-600"},"正在加载骑手信息..."),i("p",{class:"text-sm text-gray-400 mt-1"},"请稍候片刻")],-1)])),_:1})])):(D(),j("div",ft,[i("div",mt,[i("h4",gt,[e(t(h),{color:"#fa8c16"},{default:a(()=>[e(t(ee))]),_:1}),y(" "+T(t(M))+"年"+T(U)+"月绩效概览 ",1)]),Object.keys(w.value).length>0?(D(),X(t(G),{key:0,cols:4,"x-gap":20},{default:a(()=>[(D(!0),j(ne,null,re(w.value,(_,H)=>(D(),X(t(C),{key:H},{default:a(()=>[i("div",vt,[i("div",{class:De(["text-2xl font-bold",{"text-yellow-600":Z(_)==="success","text-orange-600":Z(_)==="warning","text-blue-600":Z(_)==="info"}])},T(_),3),i("div",pt,T(se(H)),1)])]),_:2},1024))),128))]),_:1})):(D(),j("div",ht,[e(t(h),{size:"48",color:"#d9d9d9"},{default:a(()=>[e(t(q))]),_:1}),l[9]||(l[9]=i("p",{class:"text-gray-500 mt-2"},"暂无当月绩效数据",-1))]))]),e(t(oe)),e(t(G),{cols:2,"x-gap":24,"y-gap":20},{default:a(()=>[e(t(C),null,{default:a(()=>[e(t(P),{title:"基本信息",size:"small",class:"h-full"},{"header-extra":a(()=>[e(t(h),{color:"#fa8c16"},{default:a(()=>[e(t(te))]),_:1})]),default:a(()=>[i("div",yt,[i("div",xt,[l[10]||(l[10]=i("span",{class:"text-gray-600 font-medium"},"骑手ID",-1)),e(t(I),{code:"",style:{"word-break":"break-all","max-width":"200px"}},{default:a(()=>[y(T(v.value.riderId||v.value.RiderId||"-"),1)]),_:1})]),i("div",_t,[l[11]||(l[11]=i("span",{class:"text-gray-600 font-medium"},"姓名",-1)),e(t(I),{strong:""},{default:a(()=>[y(T(v.value.name||v.value.Name||"未设置"),1)]),_:1})]),i("div",wt,[i("span",bt,[e(t(h),{size:"16",color:"#1890ff"},{default:a(()=>[e(t(ge))]),_:1}),l[12]||(l[12]=y(" 手机号 "))]),e(t(I),null,{default:a(()=>[y(T(v.value.phoneNumber||v.value.PhoneNumber||"未设置"),1)]),_:1})]),i("div",Rt,[i("span",kt,[e(t(h),{size:"16",color:"#52c41a"},{default:a(()=>[e(t(he))]),_:1}),l[13]||(l[13]=y(" 车牌号 "))]),e(t(I),null,{default:a(()=>[y(T(v.value.vehicleNumber||v.value.VehicleNumber||"未登记"),1)]),_:1})])])]),_:1})]),_:1}),e(t(C),null,{default:a(()=>[e(t(P),{title:"账户关联",size:"small",class:"h-full"},{"header-extra":a(()=>[e(t(h),{color:"#722ed1"},{default:a(()=>[e(t(te))]),_:1})]),default:a(()=>[i("div",It,[i("div",Ot,[l[14]||(l[14]=i("span",{class:"text-gray-600 font-medium"},"关联用户ID",-1)),e(t(I),{style:{"word-break":"break-all","max-width":"200px"}},{default:a(()=>[y(T(v.value.applicationUserId||v.value.ApplicationUserId||"未关联"),1)]),_:1})]),i("div",zt,[l[15]||(l[15]=i("span",{class:"text-gray-600 font-medium"},"账户状态",-1)),e(t(W),{value:v.value.applicationUserId?"已关联":"未关联",type:v.value.applicationUserId?"success":"warning"},null,8,["value","type"])]),i("div",Nt,[l[16]||(l[16]=i("span",{class:"text-gray-600 font-medium"},"车辆状态",-1)),e(t(W),{value:v.value.vehicleNumber?"已登记":"未登记",type:v.value.vehicleNumber?"success":"warning"},null,8,["value","type"])])])]),_:1})]),_:1})]),_:1}),Object.keys(w.value).length>0?(D(),j("div",Tt,[e(t(oe),null,{default:a(()=>[e(t(h),{color:"#fa8c16"},{default:a(()=>[e(t(ee))]),_:1}),l[17]||(l[17]=y(" 详细排名 "))]),_:1,__:[17]}),e(t(G),{cols:2,"x-gap":16,"y-gap":12},{default:a(()=>[(D(!0),j(ne,null,re(w.value,(_,H)=>(D(),X(t(C),{key:H},{default:a(()=>[i("div",Ct,[i("div",St,[e(t(h),{color:"#fa8c16",size:"16"},{default:a(()=>[e(t(q))]),_:1}),i("span",Mt,T(se(H)),1)]),e(t(W),{value:`第${_}名`,type:Z(_),style:{"--n-font-size":"12px"}},null,8,["value","type"])])]),_:2},1024))),128))]),_:1})])):Me("",!0)]))]),_:1},8,["show"])])}}}),Zt=ye(At,[["__scopeId","data-v-9dd236c2"]]);export{Zt as default};
//# sourceMappingURL=index-kfaf63CT.js.map
