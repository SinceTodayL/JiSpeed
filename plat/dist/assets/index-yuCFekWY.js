import{L as oe,M as me,d as j,b as C,o as _,e as o,O as ve,r as I,a as W,P as ge,f as e,g as c,w as a,h as l,Q as u,J as y,N as B,R as q,B as S,t as b,c as G,E as H,s as J,p as xe,S as he,K as be,U as ye,V as K,W as _e,X as we}from"./index-BPGfaLpZ.js";import{N as h,a as $}from"./Grid-D64zesWF.js";import{N as D,S as ke,R as Q,a as Ce,b as N,c as X}from"./SearchOutline-h4e-WueY.js";import{C as Y,B as Z,D as ze}from"./DocumentTextOutline-DFrE1aAE.js";import{C as A,T as Ie}from"./TimeOutline-G1EeFalv.js";import{_ as ee}from"./Badge-Cwz1TmRm.js";import{W as Se}from"./WalletOutline-njvjXU-S.js";import{B as De}from"./BicycleOutline-B13PJAH9.js";import{P as Ne}from"./PersonOutline-1CXGZG5Z.js";import{E as Re}from"./EyeOutline-BONscCOK.js";import{b as le,N as k,a as te}from"./FormItem-uK_GGBtG.js";function Oe(p={}){return console.log("获取投诉列表，筛选参数:",p),oe("/api/complaints",p)}function Ae(p){return console.log("获取投诉详情，ID:",p),oe(`/api/complaints/${p}`)}function Me(p,m,i){return console.log(`管理员 ${p} 审批投诉 ${m}:`,i),me(`/api/admin/${p}complaints/${m}/audit`,i)}const je={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},ae=j({name:"ChatbubbleOutline",render:function(m,i){return _(),C("svg",je,i[0]||(i[0]=[o("path",{d:"M87.49 380c1.19-4.38-1.44-10.47-3.95-14.86a44.86 44.86 0 0 0-2.54-3.8a199.81 199.81 0 0 1-33-110C47.65 139.09 140.73 48 255.83 48C356.21 48 440 117.54 459.58 209.85a199 199 0 0 1 4.42 41.64c0 112.41-89.49 204.93-204.59 204.93c-18.3 0-43-4.6-56.47-8.37s-26.92-8.77-30.39-10.11a31.09 31.09 0 0 0-11.12-2.07a30.71 30.71 0 0 0-12.09 2.43l-67.83 24.48a16 16 0 0 1-4.67 1.22a9.6 9.6 0 0 1-9.57-9.74a15.85 15.85 0 0 1 .6-3.29z",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-miterlimit":"10","stroke-width":"32"},null,-1)]))}}),Be={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},V=j({name:"InformationCircleOutline",render:function(m,i){return _(),C("svg",Be,i[0]||(i[0]=[o("path",{d:"M248 64C146.39 64 64 146.39 64 248s82.39 184 184 184s184-82.39 184-184S349.61 64 248 64z",fill:"none",stroke:"currentColor","stroke-miterlimit":"10","stroke-width":"32"},null,-1),o("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M220 220h32v116"},null,-1),o("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-miterlimit":"10","stroke-width":"32",d:"M208 340h88"},null,-1),o("path",{d:"M248 130a26 26 0 1 0 26 26a26 26 0 0 0-26-26z",fill:"currentColor"},null,-1)]))}}),$e={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},se=j({name:"SettingsOutline",render:function(m,i){return _(),C("svg",$e,i[0]||(i[0]=[o("path",{d:"M262.29 192.31a64 64 0 1 0 57.4 57.4a64.13 64.13 0 0 0-57.4-57.4zM416.39 256a154.34 154.34 0 0 1-1.53 20.79l45.21 35.46a10.81 10.81 0 0 1 2.45 13.75l-42.77 74a10.81 10.81 0 0 1-13.14 4.59l-44.9-18.08a16.11 16.11 0 0 0-15.17 1.75A164.48 164.48 0 0 1 325 400.8a15.94 15.94 0 0 0-8.82 12.14l-6.73 47.89a11.08 11.08 0 0 1-10.68 9.17h-85.54a11.11 11.11 0 0 1-10.69-8.87l-6.72-47.82a16.07 16.07 0 0 0-9-12.22a155.3 155.3 0 0 1-21.46-12.57a16 16 0 0 0-15.11-1.71l-44.89 18.07a10.81 10.81 0 0 1-13.14-4.58l-42.77-74a10.8 10.8 0 0 1 2.45-13.75l38.21-30a16.05 16.05 0 0 0 6-14.08c-.36-4.17-.58-8.33-.58-12.5s.21-8.27.58-12.35a16 16 0 0 0-6.07-13.94l-38.19-30A10.81 10.81 0 0 1 49.48 186l42.77-74a10.81 10.81 0 0 1 13.14-4.59l44.9 18.08a16.11 16.11 0 0 0 15.17-1.75A164.48 164.48 0 0 1 187 111.2a15.94 15.94 0 0 0 8.82-12.14l6.73-47.89A11.08 11.08 0 0 1 213.23 42h85.54a11.11 11.11 0 0 1 10.69 8.87l6.72 47.82a16.07 16.07 0 0 0 9 12.22a155.3 155.3 0 0 1 21.46 12.57a16 16 0 0 0 15.11 1.71l44.89-18.07a10.81 10.81 0 0 1 13.14 4.58l42.77 74a10.8 10.8 0 0 1-2.45 13.75l-38.21 30a16.05 16.05 0 0 0-6.05 14.08c.33 4.14.55 8.3.55 12.47z",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1)]))}}),Ue={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},M=j({name:"WarningOutline",render:function(m,i){return _(),C("svg",Ue,i[0]||(i[0]=[o("path",{d:"M85.57 446.25h340.86a32 32 0 0 0 28.17-47.17L284.18 82.58c-12.09-22.44-44.27-22.44-56.36 0L57.4 399.08a32 32 0 0 0 28.17 47.17z",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),o("path",{d:"M250.26 195.39l5.74 122l5.73-121.95a5.74 5.74 0 0 0-5.79-6h0a5.74 5.74 0 0 0-5.68 5.95z",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),o("path",{d:"M256 397.25a20 20 0 1 1 20-20a20 20 0 0 1-20 20z",fill:"currentColor"},null,-1)]))}}),Te={class:"p-6 min-h-full bg-gradient-to-br from-red-50 to-purple-50"},Pe={class:"mb-6"},Le={class:"text-2xl font-bold text-gray-800 mb-2 flex items-center gap-2"},Ve={class:"flex items-center gap-2"},Ee={class:"flex items-center gap-3"},Fe={class:"text-lg font-semibold text-gray-800"},We={class:"text-sm text-gray-500"},qe={class:"space-y-6"},Ge={class:"bg-white p-4 rounded-lg border border-red-200 shadow-sm"},He={class:"text-gray-800 font-medium mb-4 flex items-center gap-2"},Je={class:"text-center p-3 bg-purple-50 rounded-lg border border-purple-200"},Ke={class:"text-lg font-bold text-purple-700"},Qe={class:"text-center p-3 bg-blue-50 rounded-lg border border-blue-200"},Xe={class:"text-lg font-bold text-blue-700"},Ye={class:"text-center p-3 bg-green-50 rounded-lg border border-green-200"},Ze={class:"text-lg font-bold text-green-700"},el={class:"space-y-4"},ll={class:"flex justify-between items-center py-2 border-b border-gray-100"},tl={class:"flex justify-between items-center py-2 border-b border-gray-100"},al={class:"flex justify-between items-center py-2 border-b border-gray-100"},sl={class:"flex justify-between items-center py-2"},ol={class:"p-4 bg-white rounded-lg min-h-32 border border-gray-200 shadow-sm"},nl={key:0},rl={class:"text-gray-800 font-medium mb-4 flex items-center gap-2"},ul={class:"flex items-center space-x-4"},dl={class:"flex items-center gap-2"},il={class:"flex justify-end gap-4 mt-6 pt-4 border-t border-gray-200"},fl={key:1,class:"text-center py-8"};function E(p){return typeof p=="function"||Object.prototype.toString.call(p)==="[object Object]"&&!_e(p)}const cl=j({name:"complaint-handle",__name:"index",setup(p){const m=ve(),i=I(!1),g=I([]),R=I(!1),v=I({}),r=I({userId:"",merchantId:"",status:null,size:null,page:null}),d=I({status:"",reason:"",remark:"",needRefund:!1,refundAmount:0}),ne=[{label:"投诉成立",value:"approved"},{label:"投诉不成立",value:"rejected"},{label:"需要进一步调查",value:"investigating"}],re=[{label:"全部状态",value:null},{label:"待处理",value:0},{label:"处理中",value:1},{label:"已处理",value:2}],w=W(()=>{const s=g.value.length,t=g.value.filter(x=>x.cmplStatus===0).length,f=g.value.filter(x=>x.cmplStatus===1).length,n=g.value.filter(x=>x.cmplStatus===2).length,O=g.value.filter(x=>x.cmplRole===1).length,z=g.value.filter(x=>x.cmplRole===2).length;return{total:s,pendingCount:t,processingCount:f,completedCount:n,merchantComplaints:O,riderComplaints:z,completionRate:s>0?Math.round(n/s*100):0,urgentCount:t+f}}),U=W(()=>g.value.filter(s=>!(r.value.userId&&!s.complainantId?.includes(r.value.userId)||r.value.merchantId&&!s.merchantId?.includes(r.value.merchantId)||r.value.status!==null&&s.cmplStatus!==r.value.status)));async function T(){try{i.value=!0;const s={};r.value.userId&&r.value.userId.trim()&&(s.userId=r.value.userId.trim()),r.value.merchantId&&r.value.merchantId.trim()&&(s.merchantId=r.value.merchantId.trim()),r.value.status!==null&&r.value.status!==void 0&&(s.status=r.value.status),r.value.size&&r.value.size>0&&(s.size=r.value.size),r.value.page&&r.value.page>0&&(s.page=r.value.page);const t=await Oe(s);if(console.log("API响应:",t),t&&t.data)if(Array.isArray(t.data))if(console.log("获取到投诉ID列表，共",t.data.length,"条:",t.data),t.data.length===0)console.log("投诉列表为空"),g.value=[];else try{const f=t.data.map(async z=>{try{console.log("正在获取投诉详情，ID:",z);const x=await Ae(z);return console.log(`投诉 ${z} 详情:`,x),x?.data||null}catch(x){return console.error(`获取投诉详情失败 ${z}:`,x),null}}),O=(await Promise.all(f)).filter(Boolean);console.log("成功获取投诉详情数量:",O.length,"详情:",O),g.value=O}catch(f){console.error("批量获取投诉详情失败:",f),m.error("获取投诉详情失败"),g.value=[]}else console.log("获取到非数组投诉数据:",t.data),g.value=[t.data];else console.log("没有获取到投诉数据，响应:",t),g.value=[]}catch(s){m.error("获取投诉列表失败: "+s.message),console.error("Error fetching complaint list:",s),g.value=[]}finally{i.value=!1}}const ue=[{key:"index",title:"序号",align:"center",width:70,render:(s,t)=>e(ee,{value:t+1,type:"error"},null)},{key:"complaintInfo",title:"投诉信息",width:200,render:s=>e("div",{class:"flex items-center gap-12px"},[e(X,{size:"medium",style:{backgroundColor:s.cmplStatus===0?"#ff4d4f":s.cmplStatus===1?"#faad14":"#52c41a"}},{default:()=>[e(u,null,{default:()=>[e(M,null,null)]})]}),e("div",{class:"flex flex-col"},[e(N,{strong:!0,style:"font-size: 12px;"},{default:()=>[c("ID: "),s.complaintId?.slice(-8)||"-"]}),e(N,{depth:"3",style:"font-size: 11px;"},{default:()=>[c("订单: "),s.orderId?.slice(-8)||"-"]})])])},{key:"cmplRole",title:"投诉类型",align:"center",width:120,render:s=>{let t;const f={1:{type:"warning",icon:Z,color:"#fa8c16"},2:{type:"info",icon:De,color:"#1890ff"}},n=f[s.cmplRole]||f[1];return e("div",{class:"flex items-center justify-center gap-4px"},[e(u,{color:n.color,size:"14"},{default:()=>[e(n.icon,null,null)]}),e(K,{type:n.type,size:"small"},E(t=P(s.cmplRole))?t:{default:()=>[t]})])}},{key:"cmplDescription",title:"投诉内容",width:200,render:s=>e("div",{class:"flex items-center gap-4px"},[e(u,{color:"#722ed1",size:"14"},{default:()=>[e(ae,null,null)]}),e(N,{style:"font-size: 12px; max-width: 150px; word-break: break-all;",depth:"2"},{default:()=>[s.cmplDescription?s.cmplDescription.slice(0,30)+(s.cmplDescription.length>30?"...":""):"无描述"]})])},{key:"complainantInfo",title:"投诉人",align:"center",width:140,render:s=>e("div",{class:"flex items-center justify-center gap-4px"},[e(u,{color:"#722ed1",size:"14"},{default:()=>[e(Ne,null,null)]}),e(N,{style:"font-size: 12px;",depth:"3"},{default:()=>[s.complainantId?.slice(-8)||"未知"]})])},{key:"createdAt",title:"投诉时间",align:"center",width:140,render:s=>{let t;return e("div",{class:"flex items-center justify-center gap-4px"},[e(u,{color:"#52c41a",size:"14"},{default:()=>[e(Ie,null,null)]}),e(N,{style:"font-size: 11px;",depth:"3"},E(t=L(s.createdAt))?t:{default:()=>[t]})])}},{key:"cmplStatus",title:"处理状态",align:"center",width:120,render:s=>{let t;const f={0:{type:"error",icon:Y,color:"#ff4d4f"},1:{type:"warning",icon:V,color:"#faad14"},2:{type:"success",icon:A,color:"#52c41a"}},n=f[s.cmplStatus]||f[0];return e("div",{class:"flex items-center justify-center gap-4px"},[e(u,{color:n.color,size:"16"},{default:()=>[e(n.icon,null,null)]}),e(K,{type:n.type,size:"small"},E(t=F(s.cmplStatus))?t:{default:()=>[t]})])}},{key:"actions",title:"操作",align:"center",width:120,render:s=>e(S,{type:s.cmplStatus===2?"default":"error",size:"small",onClick:()=>de(s),style:"border-radius: 6px;"},{default:()=>[e("div",{style:"display: flex; align-items: center; gap: 4px;"},[e(u,{size:"14"},{default:()=>[s.cmplStatus===2?e(Re,null,null):e(se,null,null)]}),s.cmplStatus===2?"查看详情":"处理投诉"])]})}];function P(s){return{1:"投诉商家",2:"投诉骑手"}[s]||"未知投诉"}function F(s){return{0:"待处理",1:"处理中",2:"已处理"}[s]||"未知状态"}function L(s){if(!s)return"-";try{return new Date(s).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})}catch{return s}}function de(s){v.value=s,d.value={status:"",reason:"",remark:"",needRefund:!1,refundAmount:0},R.value=!0}function ie(){m.success(`找到 ${U.value.length} 条投诉记录`)}function fe(){r.value={userId:"",merchantId:"",status:null,size:null,page:null},m.info("搜索条件已重置")}function ce(){T()}async function pe(){if(!d.value.status){m.warning("请选择处理结果");return}if(d.value.needRefund&&d.value.refundAmount<=0){m.warning("请输入有效的退款金额");return}try{const s="6f7af74d972c481c91f19596e07aae3a",t={Status:d.value.status,Reason:d.value.reason,Remark:d.value.remark,NeedRefund:d.value.needRefund,RefundAmount:d.value.needRefund?d.value.refundAmount:0};await Me(s,v.value.complaintId,t),d.value.needRefund?m.success(`投诉处理完成，已为用户退款 ¥${d.value.refundAmount}`):m.success("投诉处理完成"),R.value=!1,T()}catch(s){m.error("处理失败: "+s.message)}}return ge(()=>{T()}),(s,t)=>{const f=N;return _(),C("div",Te,[o("div",Pe,[o("h1",Le,[e(l(u),{size:"24",color:"#ff4d4f"},{default:a(()=>[e(l(M))]),_:1}),t[10]||(t[10]=c(" 投诉处理中心 "))]),t[11]||(t[11]=o("p",{class:"text-gray-600"},"处理用户投诉，维护平台服务质量",-1))]),e(l($),{cols:6,"x-gap":16,"y-gap":16,class:"mb-6"},{default:a(()=>[e(l(h),null,{default:a(()=>[e(l(y),{bordered:!1,class:"shadow-sm hover:shadow-lg transition-shadow duration-300"},{default:a(()=>[e(l(D),{label:"总投诉数",value:w.value.total,"value-style":"color: #ff4d4f; font-weight: bold;"},{prefix:a(()=>[e(l(u),{size:"20",color:"#ff4d4f"},{default:a(()=>[e(l(M))]),_:1})]),_:1},8,["value"])]),_:1})]),_:1}),e(l(h),null,{default:a(()=>[e(l(y),{bordered:!1,class:"shadow-sm hover:shadow-lg transition-shadow duration-300"},{default:a(()=>[e(l(D),{label:"待处理",value:w.value.pendingCount,"value-style":"color: #ff4d4f; font-weight: bold;"},{prefix:a(()=>[e(l(u),{size:"20",color:"#ff4d4f"},{default:a(()=>[e(l(Y))]),_:1})]),_:1},8,["value"])]),_:1})]),_:1}),e(l(h),null,{default:a(()=>[e(l(y),{bordered:!1,class:"shadow-sm hover:shadow-lg transition-shadow duration-300"},{default:a(()=>[e(l(D),{label:"处理中",value:w.value.processingCount,"value-style":"color: #faad14; font-weight: bold;"},{prefix:a(()=>[e(l(u),{size:"20",color:"#faad14"},{default:a(()=>[e(l(V))]),_:1})]),_:1},8,["value"])]),_:1})]),_:1}),e(l(h),null,{default:a(()=>[e(l(y),{bordered:!1,class:"shadow-sm hover:shadow-lg transition-shadow duration-300"},{default:a(()=>[e(l(D),{label:"已处理",value:w.value.completedCount,"value-style":"color: #52c41a; font-weight: bold;"},{prefix:a(()=>[e(l(u),{size:"20",color:"#52c41a"},{default:a(()=>[e(l(A))]),_:1})]),_:1},8,["value"])]),_:1})]),_:1}),e(l(h),null,{default:a(()=>[e(l(y),{bordered:!1,class:"shadow-sm hover:shadow-lg transition-shadow duration-300"},{default:a(()=>[e(l(D),{label:"商家投诉",value:w.value.merchantComplaints,"value-style":"color: #fa8c16; font-weight: bold;"},{prefix:a(()=>[e(l(u),{size:"20",color:"#fa8c16"},{default:a(()=>[e(l(Z))]),_:1})]),_:1},8,["value"])]),_:1})]),_:1}),e(l(h),null,{default:a(()=>[e(l(y),{bordered:!1,class:"shadow-sm hover:shadow-lg transition-shadow duration-300"},{default:a(()=>[e(l(D),{label:"处理率",value:w.value.completionRate,"value-style":"color: #722ed1; font-weight: bold;"},{suffix:a(()=>t[12]||(t[12]=[o("span",{class:"text-sm text-gray-500"},"%",-1)])),prefix:a(()=>[e(l(u),{size:"20",color:"#722ed1"},{default:a(()=>[e(l(A))]),_:1})]),_:1},8,["value"])]),_:1})]),_:1})]),_:1}),e(l(y),{title:"筛选条件",class:"mb-6 shadow-sm",bordered:!1},{"header-extra":a(()=>[e(l(te),null,{default:a(()=>[e(l(S),{size:"small",onClick:ie,type:"primary"},{icon:a(()=>[e(l(u),null,{default:a(()=>[e(l(ke))]),_:1})]),default:a(()=>[t[13]||(t[13]=c(" 搜索 "))]),_:1,__:[13]}),e(l(S),{size:"small",onClick:fe},{icon:a(()=>[e(l(u),null,{default:a(()=>[e(l(Q))]),_:1})]),default:a(()=>[t[14]||(t[14]=c(" 重置 "))]),_:1,__:[14]})]),_:1})]),default:a(()=>[e(l(le),{model:r.value,inline:"","label-placement":"left","label-width":"80"},{default:a(()=>[e(l(k),{label:"投诉人ID"},{default:a(()=>[e(l(B),{value:r.value.userId,"onUpdate:value":t[0]||(t[0]=n=>r.value.userId=n),placeholder:"输入用户ID",clearable:"",style:{width:"150px"}},null,8,["value"])]),_:1}),e(l(k),{label:"商家ID"},{default:a(()=>[e(l(B),{value:r.value.merchantId,"onUpdate:value":t[1]||(t[1]=n=>r.value.merchantId=n),placeholder:"输入商家ID",clearable:"",style:{width:"150px"}},null,8,["value"])]),_:1}),e(l(k),{label:"处理状态"},{default:a(()=>[e(l(q),{value:r.value.status,"onUpdate:value":t[2]||(t[2]=n=>r.value.status=n),options:re,placeholder:"选择状态",clearable:"",style:{width:"120px"}},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1}),e(l(y),{bordered:!1,class:"shadow-sm"},{header:a(()=>[o("div",Ve,[e(l(u),{size:"18",color:"#ff4d4f"},{default:a(()=>[e(l(M))]),_:1}),t[15]||(t[15]=o("span",{class:"font-medium"},"投诉列表",-1)),w.value.urgentCount>0?(_(),G(l(ee),{key:0,value:w.value.urgentCount,type:"error",style:{"margin-left":"8px"}},null,8,["value"])):H("",!0)])]),"header-extra":a(()=>[e(l(te),{align:"center"},{default:a(()=>[e(f,{depth:"3"},{default:a(()=>[c(" 显示 "+b(U.value.length)+" / "+b(g.value.length)+" 条记录 ",1)]),_:1}),e(l(S),{size:"small",onClick:ce,loading:i.value},{icon:a(()=>[e(l(u),null,{default:a(()=>[e(l(Q))]),_:1})]),default:a(()=>[t[16]||(t[16]=c(" 刷新 "))]),_:1,__:[16]},8,["loading"])]),_:1})]),default:a(()=>[e(l(Ce),{columns:ue,data:U.value,loading:i.value,pagination:{pageSize:10,showSizePicker:!0,pageSizes:[10,20,50]},"flex-height":"",class:"min-h-400px","row-class-name":n=>n.cmplStatus===0?"urgent-row":n.cmplStatus===1?"processing-row":"completed-row"},null,8,["data","loading","row-class-name"])]),_:1}),e(l(ye),{show:R.value,"onUpdate:show":t[9]||(t[9]=n=>R.value=n),preset:"card",style:{width:"800px","max-height":"80vh","background-color":"#ffffff"},class:"rounded-2xl complaint-modal","mask-closable":!1},{header:a(()=>[o("div",Ee,[e(l(X),{size:40,style:be({backgroundColor:v.value.cmplStatus===0?"#ff4d4f":v.value.cmplStatus===1?"#faad14":"#52c41a"})},{default:a(()=>[e(l(u),{size:"20"},{default:a(()=>[e(l(M))]),_:1})]),_:1},8,["style"]),o("div",null,[o("h3",Fe," 投诉处理 - "+b(P(v.value.cmplRole)),1),o("p",We," ID: "+b(v.value.complaintId||"-"),1)])])]),default:a(()=>[o("div",qe,[o("div",Ge,[o("h4",He,[e(l(u),{color:"#ff4d4f"},{default:a(()=>[e(l(ze))]),_:1}),t[17]||(t[17]=c(" 投诉详情 "))]),e(l($),{cols:3,"x-gap":20,"y-gap":12},{default:a(()=>[e(l(h),null,{default:a(()=>[o("div",Je,[o("div",Ke,b(F(v.value.cmplStatus)),1),t[18]||(t[18]=o("div",{class:"text-sm text-gray-700 font-medium"},"当前状态",-1))])]),_:1}),e(l(h),null,{default:a(()=>[o("div",Qe,[o("div",Xe,b(P(v.value.cmplRole)),1),t[19]||(t[19]=o("div",{class:"text-sm text-gray-700 font-medium"},"投诉类型",-1))])]),_:1}),e(l(h),null,{default:a(()=>[o("div",Ye,[o("div",Ze,b(L(v.value.createdAt).split(" ")[0]),1),t[20]||(t[20]=o("div",{class:"text-sm text-gray-700 font-medium"},"投诉时间",-1))])]),_:1})]),_:1})]),e(l(J)),e(l($),{cols:2,"x-gap":24,"y-gap":20},{default:a(()=>[e(l(h),null,{default:a(()=>[e(l(y),{title:"基本信息",size:"small",class:"h-full"},{"header-extra":a(()=>[e(l(u),{color:"#ff4d4f"},{default:a(()=>[e(l(V))]),_:1})]),default:a(()=>[o("div",el,[o("div",ll,[t[21]||(t[21]=o("span",{class:"text-gray-700 font-medium"},"投诉ID",-1)),e(f,{code:"",style:{"word-break":"break-all","max-width":"200px","background-color":"#f7fafc",color:"#2d3748",padding:"2px 6px","border-radius":"4px"}},{default:a(()=>[c(b(v.value.complaintId||"-"),1)]),_:1})]),o("div",tl,[t[22]||(t[22]=o("span",{class:"text-gray-700 font-medium"},"订单ID",-1)),e(f,{code:"",style:{"word-break":"break-all","max-width":"200px","background-color":"#f7fafc",color:"#2d3748",padding:"2px 6px","border-radius":"4px"}},{default:a(()=>[c(b(v.value.orderId||"-"),1)]),_:1})]),o("div",al,[t[23]||(t[23]=o("span",{class:"text-gray-700 font-medium"},"投诉人ID",-1)),e(f,{code:"",style:{"word-break":"break-all","max-width":"200px","background-color":"#f7fafc",color:"#2d3748",padding:"2px 6px","border-radius":"4px"}},{default:a(()=>[c(b(v.value.complainantId||"-"),1)]),_:1})]),o("div",sl,[t[24]||(t[24]=o("span",{class:"text-gray-700 font-medium"},"投诉时间",-1)),e(f,{style:{color:"#2d3748","font-weight":"500"}},{default:a(()=>[c(b(L(v.value.createdAt)||"-"),1)]),_:1})])])]),_:1})]),_:1}),e(l(h),null,{default:a(()=>[e(l(y),{title:"投诉内容",size:"small",class:"h-full"},{"header-extra":a(()=>[e(l(u),{color:"#722ed1"},{default:a(()=>[e(l(ae))]),_:1})]),default:a(()=>[o("div",ol,[e(f,{style:{color:"#2d3748","font-weight":"500","line-height":"1.6"}},{default:a(()=>[c(b(v.value.cmplDescription||"无详细投诉描述"),1)]),_:1})])]),_:1})]),_:1})]),_:1}),e(l(J)),v.value.cmplStatus!==2?(_(),C("div",nl,[o("h4",rl,[e(l(u),{color:"#1890ff"},{default:a(()=>[e(l(se))]),_:1}),t[25]||(t[25]=c(" 处理操作 "))]),e(l(le),{model:d.value,"label-placement":"top"},{default:a(()=>[e(l($),{cols:2,"x-gap":16},{default:a(()=>[e(l(h),null,{default:a(()=>[e(l(k),{label:"处理结果",required:""},{default:a(()=>[e(l(q),{value:d.value.status,"onUpdate:value":t[3]||(t[3]=n=>d.value.status=n),options:ne,placeholder:"请选择处理结果",size:"large"},null,8,["value"])]),_:1})]),_:1}),e(l(h),null,{default:a(()=>[e(l(k),{label:"处理原因"},{default:a(()=>[e(l(B),{value:d.value.reason,"onUpdate:value":t[4]||(t[4]=n=>d.value.reason=n),placeholder:"请输入处理原因",size:"large"},null,8,["value"])]),_:1})]),_:1})]),_:1}),e(l(k),{label:"退款设置"},{default:a(()=>[o("div",ul,[e(l(xe),{checked:d.value.needRefund,"onUpdate:checked":t[5]||(t[5]=n=>d.value.needRefund=n)},{default:a(()=>[o("span",dl,[e(l(u),{color:"#fa8c16"},{default:a(()=>[e(l(Se))]),_:1}),t[26]||(t[26]=c(" 需要为用户退款 "))])]),_:1},8,["checked"])])]),_:1}),d.value.needRefund?(_(),G(l(k),{key:0,label:"退款金额",required:""},{default:a(()=>[e(l(he),{value:d.value.refundAmount,"onUpdate:value":t[6]||(t[6]=n=>d.value.refundAmount=n),placeholder:"请输入退款金额",min:.01,max:1e4,precision:2,size:"large",style:{width:"100%"}},{prefix:a(()=>t[27]||(t[27]=[c("¥")])),_:1},8,["value"])]),_:1})):H("",!0),e(l(k),{label:"备注说明"},{default:a(()=>[e(l(B),{value:d.value.remark,"onUpdate:value":t[7]||(t[7]=n=>d.value.remark=n),type:"textarea",placeholder:"请输入处理备注或说明",rows:4,"show-count":"",maxlength:"200"},null,8,["value"])]),_:1})]),_:1},8,["model"]),o("div",il,[e(l(S),{onClick:t[8]||(t[8]=n=>R.value=!1),size:"large"},{default:a(()=>t[28]||(t[28]=[c(" 取消 ")])),_:1,__:[28]}),e(l(S),{type:"primary",onClick:pe,size:"large",style:{background:"linear-gradient(135deg, #ff4d4f, #ff7875)",border:"none"}},{icon:a(()=>[e(l(u),null,{default:a(()=>[e(l(A))]),_:1})]),default:a(()=>[t[29]||(t[29]=c(" 确认处理 "))]),_:1,__:[29]})])])):(_(),C("div",fl,[e(l(u),{size:"48",color:"#52c41a"},{default:a(()=>[e(l(A))]),_:1}),t[30]||(t[30]=o("p",{class:"text-lg font-medium text-gray-700 mt-4"},"此投诉已处理完成",-1)),t[31]||(t[31]=o("p",{class:"text-sm text-gray-500 mt-2"},"如需重新处理，请联系系统管理员",-1))]))])]),_:1},8,["show"])])}}}),Cl=we(cl,[["__scopeId","data-v-46854382"]]);export{Cl as default};
//# sourceMappingURL=index-yuCFekWY.js.map
