import{L as se,M as pe,d as j,b as C,o as y,e as s,O as me,r as I,a as F,P as ve,Q as ge,f as e,g as f,w as a,h as l,R as u,J as b,N as B,S as W,B as S,t as _,c as G,E as q,s as H,p as xe,U as he,K as _e,V as be,W as J,X as ye,Y as we}from"./index-BAs_WLux.js";import{N as D,a as ke}from"./Grid-BbkZfnsV.js";import{N,S as Ce,R as K,a as ze,b as R,c as Q}from"./SearchOutline-JbPAbITz.js";import{C as X,B as Y,D as Ie}from"./DocumentTextOutline-Nj97bzJD.js";import{C as A,T as Se}from"./TimeOutline-3Z0T2UGB.js";import{_ as Z}from"./Badge-D3shIcCP.js";import{W as De}from"./WalletOutline-BuX-0FCE.js";import{B as Ne}from"./BicycleOutline-BokwVW1d.js";import{P as Re}from"./PersonOutline-B68i6cpn.js";import{E as Oe}from"./EyeOutline-B7PTlgYu.js";import{b as ee,N as k,a as te}from"./FormItem-DaUQ-IrC.js";function Ae(p={}){return console.log("获取投诉列表，筛选参数:",p),se("/api/complaints",p)}function Me(p){return console.log("获取投诉详情，ID:",p),se(`/api/complaints/${p}`)}function je(p,m,d){return console.log(`管理员 ${p} 审批投诉 ${m}:`,d),pe(`/api/admin/${p}complaints/${m}/audit`,d)}const Be={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},le=j({name:"ChatbubbleOutline",render:function(m,d){return y(),C("svg",Be,d[0]||(d[0]=[s("path",{d:"M87.49 380c1.19-4.38-1.44-10.47-3.95-14.86a44.86 44.86 0 0 0-2.54-3.8a199.81 199.81 0 0 1-33-110C47.65 139.09 140.73 48 255.83 48C356.21 48 440 117.54 459.58 209.85a199 199 0 0 1 4.42 41.64c0 112.41-89.49 204.93-204.59 204.93c-18.3 0-43-4.6-56.47-8.37s-26.92-8.77-30.39-10.11a31.09 31.09 0 0 0-11.12-2.07a30.71 30.71 0 0 0-12.09 2.43l-67.83 24.48a16 16 0 0 1-4.67 1.22a9.6 9.6 0 0 1-9.57-9.74a15.85 15.85 0 0 1 .6-3.29z",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-miterlimit":"10","stroke-width":"32"},null,-1)]))}}),$e={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},L=j({name:"InformationCircleOutline",render:function(m,d){return y(),C("svg",$e,d[0]||(d[0]=[s("path",{d:"M248 64C146.39 64 64 146.39 64 248s82.39 184 184 184s184-82.39 184-184S349.61 64 248 64z",fill:"none",stroke:"currentColor","stroke-miterlimit":"10","stroke-width":"32"},null,-1),s("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M220 220h32v116"},null,-1),s("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-miterlimit":"10","stroke-width":"32",d:"M208 340h88"},null,-1),s("path",{d:"M248 130a26 26 0 1 0 26 26a26 26 0 0 0-26-26z",fill:"currentColor"},null,-1)]))}}),Ue={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},ae=j({name:"SettingsOutline",render:function(m,d){return y(),C("svg",Ue,d[0]||(d[0]=[s("path",{d:"M262.29 192.31a64 64 0 1 0 57.4 57.4a64.13 64.13 0 0 0-57.4-57.4zM416.39 256a154.34 154.34 0 0 1-1.53 20.79l45.21 35.46a10.81 10.81 0 0 1 2.45 13.75l-42.77 74a10.81 10.81 0 0 1-13.14 4.59l-44.9-18.08a16.11 16.11 0 0 0-15.17 1.75A164.48 164.48 0 0 1 325 400.8a15.94 15.94 0 0 0-8.82 12.14l-6.73 47.89a11.08 11.08 0 0 1-10.68 9.17h-85.54a11.11 11.11 0 0 1-10.69-8.87l-6.72-47.82a16.07 16.07 0 0 0-9-12.22a155.3 155.3 0 0 1-21.46-12.57a16 16 0 0 0-15.11-1.71l-44.89 18.07a10.81 10.81 0 0 1-13.14-4.58l-42.77-74a10.8 10.8 0 0 1 2.45-13.75l38.21-30a16.05 16.05 0 0 0 6-14.08c-.36-4.17-.58-8.33-.58-12.5s.21-8.27.58-12.35a16 16 0 0 0-6.07-13.94l-38.19-30A10.81 10.81 0 0 1 49.48 186l42.77-74a10.81 10.81 0 0 1 13.14-4.59l44.9 18.08a16.11 16.11 0 0 0 15.17-1.75A164.48 164.48 0 0 1 187 111.2a15.94 15.94 0 0 0 8.82-12.14l6.73-47.89A11.08 11.08 0 0 1 213.23 42h85.54a11.11 11.11 0 0 1 10.69 8.87l6.72 47.82a16.07 16.07 0 0 0 9 12.22a155.3 155.3 0 0 1 21.46 12.57a16 16 0 0 0 15.11 1.71l44.89-18.07a10.81 10.81 0 0 1 13.14 4.58l42.77 74a10.8 10.8 0 0 1-2.45 13.75l-38.21 30a16.05 16.05 0 0 0-6.05 14.08c.33 4.14.55 8.3.55 12.47z",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1)]))}}),Te={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},M=j({name:"WarningOutline",render:function(m,d){return y(),C("svg",Te,d[0]||(d[0]=[s("path",{d:"M85.57 446.25h340.86a32 32 0 0 0 28.17-47.17L284.18 82.58c-12.09-22.44-44.27-22.44-56.36 0L57.4 399.08a32 32 0 0 0 28.17 47.17z",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),s("path",{d:"M250.26 195.39l5.74 122l5.73-121.95a5.74 5.74 0 0 0-5.79-6h0a5.74 5.74 0 0 0-5.68 5.95z",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),s("path",{d:"M256 397.25a20 20 0 1 1 20-20a20 20 0 0 1-20 20z",fill:"currentColor"},null,-1)]))}}),Pe={class:"p-6 min-h-full bg-gradient-to-br from-red-50 to-purple-50"},Le={class:"mb-6"},Ve={class:"text-2xl font-bold text-gray-800 mb-2 flex items-center gap-2"},Ee={class:"flex items-center gap-2"},Fe={class:"flex items-center gap-3"},We={class:"text-lg font-semibold text-gray-800"},Ge={class:"text-sm text-gray-500"},qe={class:"space-y-6 bg-white"},He={class:"bg-white p-4 rounded-lg border border-red-200 shadow-sm"},Je={class:"text-gray-800 font-medium mb-4 flex items-center gap-2"},Ke={class:"flex"},Qe={class:"flex-1 mr-5"},Xe={class:"text-center p-3 bg-purple-50 rounded-lg border border-purple-200"},Ye={class:"text-lg font-bold text-purple-700"},Ze={class:"flex-1"},et={class:"text-center p-3 bg-blue-50 rounded-lg border border-blue-200"},tt={class:"text-lg font-bold text-blue-700"},lt={class:"flex-1"},at={class:"text-center p-3 bg-green-50 rounded-lg border border-green-200"},st={class:"text-lg font-bold text-green-700"},ot={class:"flex"},nt={class:"flex-1 mr-5"},rt={class:"space-y-4"},ut={class:"flex justify-between items-center py-2 border-b border-gray-100"},it={class:"flex justify-between items-center py-2 border-b border-gray-100"},dt={class:"flex justify-between items-center py-2 border-b border-gray-100"},ct={class:"flex justify-between items-center py-2"},ft={class:"flex-1"},pt={class:"p-4 bg-white rounded-lg min-h-32 border border-gray-200 shadow-sm"},mt={key:0},vt={class:"text-gray-800 font-medium mb-4 flex items-center gap-2"},gt={class:"font-bold text-lg my-4 flex items-center"},xt={class:"flex"},ht={class:"flex-1 mr-5"},_t={class:"flex-1"},bt={class:"flex items-center space-x-4"},yt={class:"flex items-center gap-2"},wt={class:"flex justify-end gap-4 mt-6 pt-4 border-t border-gray-200"},kt={key:1,class:"text-center py-8"};function V(p){return typeof p=="function"||Object.prototype.toString.call(p)==="[object Object]"&&!ye(p)}const Ct=j({name:"complaint-handle",__name:"index",setup(p){const m=me(),d=I(!1),g=I([]),O=I(!1),v=I({}),n=I({userId:"",merchantId:"",status:null,size:null,page:null}),i=I({status:"",reason:"",remark:"",needRefund:!1,refundAmount:0}),oe=[{label:"投诉成立",value:"approved"},{label:"投诉不成立",value:"rejected"}],ne=[{label:"全部状态",value:null},{label:"待处理",value:0},{label:"处理中",value:1},{label:"已处理",value:2}],w=F(()=>{const o=g.value.length,t=g.value.filter(x=>x.cmplStatus===0).length,c=g.value.filter(x=>x.cmplStatus===1).length,h=g.value.filter(x=>x.cmplStatus===2).length,r=g.value.filter(x=>x.cmplRole===1).length,z=g.value.filter(x=>x.cmplRole===2).length;return{total:o,pendingCount:t,processingCount:c,completedCount:h,merchantComplaints:r,riderComplaints:z,completionRate:o>0?Math.round(h/o*100):0,urgentCount:t+c}}),$=F(()=>g.value.filter(o=>!(n.value.userId&&!o.complainantId?.includes(n.value.userId)||n.value.merchantId&&!o.merchantId?.includes(n.value.merchantId)||n.value.status!==null&&o.cmplStatus!==n.value.status)));async function U(){try{d.value=!0;const o={};n.value.userId&&n.value.userId.trim()&&(o.userId=n.value.userId.trim()),n.value.merchantId&&n.value.merchantId.trim()&&(o.merchantId=n.value.merchantId.trim()),n.value.status!==null&&n.value.status!==void 0&&(o.status=n.value.status),n.value.size&&n.value.size>0&&(o.size=n.value.size),n.value.page&&n.value.page>0&&(o.page=n.value.page);const t=await Ae(o);if(console.log("API响应:",t),t&&t.data)if(Array.isArray(t.data))if(console.log("获取到投诉ID列表，共",t.data.length,"条:",t.data),t.data.length===0)console.log("投诉列表为空"),g.value=[];else try{const c=t.data.map(async z=>{try{console.log("正在获取投诉详情，ID:",z);const x=await Me(z);return console.log(`投诉 ${z} 详情:`,x),x?.data||null}catch(x){return console.error(`获取投诉详情失败 ${z}:`,x),null}}),r=(await Promise.all(c)).filter(Boolean);console.log("成功获取投诉详情数量:",r.length,"详情:",r),g.value=r}catch(c){console.error("批量获取投诉详情失败:",c),m.error("获取投诉详情失败"),g.value=[]}else console.log("获取到非数组投诉数据:",t.data),g.value=[t.data];else console.log("没有获取到投诉数据，响应:",t),g.value=[]}catch(o){m.error("获取投诉列表失败: "+o.message),console.error("Error fetching complaint list:",o),g.value=[]}finally{d.value=!1}}const re=[{key:"index",title:"序号",align:"center",width:70,render:(o,t)=>e(Z,{value:t+1,type:"error"},null)},{key:"complaintInfo",title:"投诉信息",width:200,render:o=>e("div",{class:"flex items-center gap-12px"},[e(Q,{size:"medium",style:{backgroundColor:o.cmplStatus===0?"#ff4d4f":o.cmplStatus===1?"#faad14":"#52c41a"}},{default:()=>[e(u,null,{default:()=>[e(M,null,null)]})]}),e("div",{class:"flex flex-col"},[e(R,{strong:!0,style:"font-size: 12px;"},{default:()=>[f("ID: "),o.complaintId?.slice(-8)||"-"]}),e(R,{depth:"3",style:"font-size: 11px;"},{default:()=>[f("订单: "),o.orderId?.slice(-8)||"-"]})])])},{key:"cmplRole",title:"投诉类型",align:"center",width:120,render:o=>{let t;const c={1:{type:"warning",icon:Y,color:"#fa8c16"},2:{type:"info",icon:Ne,color:"#1890ff"}},h=c[o.cmplRole]||c[1];return e("div",{class:"flex items-center justify-center gap-4px"},[e(u,{color:h.color,size:"14"},{default:()=>[e(h.icon,null,null)]}),e(J,{type:h.type,size:"small"},V(t=T(o.cmplRole))?t:{default:()=>[t]})])}},{key:"cmplDescription",title:"投诉内容",width:200,render:o=>e("div",{class:"flex items-center gap-4px"},[e(u,{color:"#722ed1",size:"14"},{default:()=>[e(le,null,null)]}),e(R,{style:"font-size: 12px; max-width: 150px; word-break: break-all;",depth:"2"},{default:()=>[o.cmplDescription?o.cmplDescription.slice(0,30)+(o.cmplDescription.length>30?"...":""):"无描述"]})])},{key:"complainantInfo",title:"投诉人",align:"center",width:140,render:o=>e("div",{class:"flex items-center justify-center gap-4px"},[e(u,{color:"#722ed1",size:"14"},{default:()=>[e(Re,null,null)]}),e(R,{style:"font-size: 12px;",depth:"3"},{default:()=>[o.complainantId?.slice(-8)||"未知"]})])},{key:"createdAt",title:"投诉时间",align:"center",width:140,render:o=>{let t;return e("div",{class:"flex items-center justify-center gap-4px"},[e(u,{color:"#52c41a",size:"14"},{default:()=>[e(Se,null,null)]}),e(R,{style:"font-size: 11px;",depth:"3"},V(t=P(o.createdAt))?t:{default:()=>[t]})])}},{key:"cmplStatus",title:"处理状态",align:"center",width:120,render:o=>{let t;const c={0:{type:"error",icon:X,color:"#ff4d4f"},1:{type:"warning",icon:L,color:"#faad14"},2:{type:"success",icon:A,color:"#52c41a"}},h=c[o.cmplStatus]||c[0];return e("div",{class:"flex items-center justify-center gap-4px"},[e(u,{color:h.color,size:"16"},{default:()=>[e(h.icon,null,null)]}),e(J,{type:h.type,size:"small"},V(t=E(o.cmplStatus))?t:{default:()=>[t]})])}},{key:"actions",title:"操作",align:"center",width:120,render:o=>e(S,{type:o.cmplStatus===2?"default":"error",size:"small",onClick:()=>ue(o),style:"border-radius: 6px;"},{default:()=>[e("div",{style:"display: flex; align-items: center; gap: 4px;"},[e(u,{size:"14"},{default:()=>[o.cmplStatus===2?e(Oe,null,null):e(ae,null,null)]}),o.cmplStatus===2?"查看详情":"处理投诉"])]})}];function T(o){return{1:"投诉商家",2:"投诉骑手"}[o]||"未知投诉"}function E(o){return{0:"待处理",1:"处理中",2:"已处理"}[o]||"未知状态"}function P(o){if(!o)return"-";try{return new Date(o).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})}catch{return o}}function ue(o){v.value=o,i.value={status:"",reason:"",remark:"",needRefund:!1,refundAmount:0},O.value=!0}function ie(){m.success(`找到 ${$.value.length} 条投诉记录`)}function de(){n.value={userId:"",merchantId:"",status:null,size:null,page:null},m.info("搜索条件已重置")}function ce(){U()}async function fe(){if(!i.value.status){m.warning("请选择处理结果");return}if(i.value.needRefund&&i.value.refundAmount<=0){m.warning("请输入有效的退款金额");return}try{const o="6f7af74d972c481c91f19596e07aae3a",t={Status:i.value.status,Reason:i.value.reason,Remark:i.value.remark,NeedRefund:i.value.needRefund,RefundAmount:i.value.needRefund?i.value.refundAmount:0};await je(o,v.value.complaintId,t),i.value.needRefund?m.success(`投诉处理完成，已为用户退款 ¥${i.value.refundAmount}`):m.success("投诉处理完成"),O.value=!1,U()}catch(o){m.error("处理失败: "+o.message)}}return ve(()=>{U()}),(o,t)=>{const c=R,h=ge("Icon");return y(),C("div",Pe,[s("div",Le,[s("h1",Ve,[e(l(u),{size:"24",color:"#ff4d4f"},{default:a(()=>[e(l(M))]),_:1}),t[10]||(t[10]=f(" 投诉处理中心 "))]),t[11]||(t[11]=s("p",{class:"text-gray-600"},"处理用户投诉，维护平台服务质量",-1))]),e(l(ke),{cols:6,"x-gap":16,"y-gap":16,class:"mb-6"},{default:a(()=>[e(l(D),null,{default:a(()=>[e(l(b),{bordered:!1,class:"shadow-sm hover:shadow-lg transition-shadow duration-300"},{default:a(()=>[e(l(N),{label:"总投诉数",value:w.value.total,"value-style":"color: #ff4d4f; font-weight: bold;"},{prefix:a(()=>[e(l(u),{size:"20",color:"#ff4d4f"},{default:a(()=>[e(l(M))]),_:1})]),_:1},8,["value"])]),_:1})]),_:1}),e(l(D),null,{default:a(()=>[e(l(b),{bordered:!1,class:"shadow-sm hover:shadow-lg transition-shadow duration-300"},{default:a(()=>[e(l(N),{label:"待处理",value:w.value.pendingCount,"value-style":"color: #ff4d4f; font-weight: bold;"},{prefix:a(()=>[e(l(u),{size:"20",color:"#ff4d4f"},{default:a(()=>[e(l(X))]),_:1})]),_:1},8,["value"])]),_:1})]),_:1}),e(l(D),null,{default:a(()=>[e(l(b),{bordered:!1,class:"shadow-sm hover:shadow-lg transition-shadow duration-300"},{default:a(()=>[e(l(N),{label:"处理中",value:w.value.processingCount,"value-style":"color: #faad14; font-weight: bold;"},{prefix:a(()=>[e(l(u),{size:"20",color:"#faad14"},{default:a(()=>[e(l(L))]),_:1})]),_:1},8,["value"])]),_:1})]),_:1}),e(l(D),null,{default:a(()=>[e(l(b),{bordered:!1,class:"shadow-sm hover:shadow-lg transition-shadow duration-300"},{default:a(()=>[e(l(N),{label:"已处理",value:w.value.completedCount,"value-style":"color: #52c41a; font-weight: bold;"},{prefix:a(()=>[e(l(u),{size:"20",color:"#52c41a"},{default:a(()=>[e(l(A))]),_:1})]),_:1},8,["value"])]),_:1})]),_:1}),e(l(D),null,{default:a(()=>[e(l(b),{bordered:!1,class:"shadow-sm hover:shadow-lg transition-shadow duration-300"},{default:a(()=>[e(l(N),{label:"商家投诉",value:w.value.merchantComplaints,"value-style":"color: #fa8c16; font-weight: bold;"},{prefix:a(()=>[e(l(u),{size:"20",color:"#fa8c16"},{default:a(()=>[e(l(Y))]),_:1})]),_:1},8,["value"])]),_:1})]),_:1}),e(l(D),null,{default:a(()=>[e(l(b),{bordered:!1,class:"shadow-sm hover:shadow-lg transition-shadow duration-300"},{default:a(()=>[e(l(N),{label:"处理率",value:w.value.completionRate,"value-style":"color: #722ed1; font-weight: bold;"},{suffix:a(()=>t[12]||(t[12]=[s("span",{class:"text-sm text-gray-500"},"%",-1)])),prefix:a(()=>[e(l(u),{size:"20",color:"#722ed1"},{default:a(()=>[e(l(A))]),_:1})]),_:1},8,["value"])]),_:1})]),_:1})]),_:1}),e(l(b),{title:"筛选条件",class:"mb-6 shadow-sm",bordered:!1},{"header-extra":a(()=>[e(l(te),null,{default:a(()=>[e(l(S),{size:"small",onClick:ie,type:"primary"},{icon:a(()=>[e(l(u),null,{default:a(()=>[e(l(Ce))]),_:1})]),default:a(()=>[t[13]||(t[13]=f(" 搜索 "))]),_:1,__:[13]}),e(l(S),{size:"small",onClick:de},{icon:a(()=>[e(l(u),null,{default:a(()=>[e(l(K))]),_:1})]),default:a(()=>[t[14]||(t[14]=f(" 重置 "))]),_:1,__:[14]})]),_:1})]),default:a(()=>[e(l(ee),{model:n.value,inline:"","label-placement":"left","label-width":"80"},{default:a(()=>[e(l(k),{label:"投诉人ID"},{default:a(()=>[e(l(B),{value:n.value.userId,"onUpdate:value":t[0]||(t[0]=r=>n.value.userId=r),placeholder:"输入用户ID",clearable:"",style:{width:"150px"}},null,8,["value"])]),_:1}),e(l(k),{label:"商家ID"},{default:a(()=>[e(l(B),{value:n.value.merchantId,"onUpdate:value":t[1]||(t[1]=r=>n.value.merchantId=r),placeholder:"输入商家ID",clearable:"",style:{width:"150px"}},null,8,["value"])]),_:1}),e(l(k),{label:"处理状态"},{default:a(()=>[e(l(W),{value:n.value.status,"onUpdate:value":t[2]||(t[2]=r=>n.value.status=r),options:ne,placeholder:"选择状态",clearable:"",style:{width:"120px"}},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1}),e(l(b),{bordered:!1,class:"shadow-sm"},{header:a(()=>[s("div",Ee,[e(l(u),{size:"18",color:"#ff4d4f"},{default:a(()=>[e(l(M))]),_:1}),t[15]||(t[15]=s("span",{class:"font-medium"},"投诉列表",-1)),w.value.urgentCount>0?(y(),G(l(Z),{key:0,value:w.value.urgentCount,type:"error",style:{"margin-left":"8px"}},null,8,["value"])):q("",!0)])]),"header-extra":a(()=>[e(l(te),{align:"center"},{default:a(()=>[e(c,{depth:"3"},{default:a(()=>[f(" 显示 "+_($.value.length)+" / "+_(g.value.length)+" 条记录 ",1)]),_:1}),e(l(S),{size:"small",onClick:ce,loading:d.value},{icon:a(()=>[e(l(u),null,{default:a(()=>[e(l(K))]),_:1})]),default:a(()=>[t[16]||(t[16]=f(" 刷新 "))]),_:1,__:[16]},8,["loading"])]),_:1})]),default:a(()=>[e(l(ze),{columns:re,data:$.value,loading:d.value,pagination:{pageSize:10,showSizePicker:!0,pageSizes:[10,20,50]},"flex-height":"",class:"min-h-400px","row-class-name":r=>r.cmplStatus===0?"urgent-row":r.cmplStatus===1?"processing-row":"completed-row"},null,8,["data","loading","row-class-name"])]),_:1}),e(l(be),{show:O.value,"onUpdate:show":t[9]||(t[9]=r=>O.value=r),preset:"card",style:{width:"800px","max-height":"80vh","background-color":"#ffffff"},class:"rounded-2xl complaint-modal","mask-closable":!1},{header:a(()=>[s("div",Fe,[e(l(Q),{size:40,style:_e({backgroundColor:v.value.cmplStatus===0?"#ff4d4f":v.value.cmplStatus===1?"#faad14":"#52c41a"})},{default:a(()=>[e(l(u),{size:"20"},{default:a(()=>[e(l(M))]),_:1})]),_:1},8,["style"]),s("div",null,[s("h3",We," 投诉处理 - "+_(T(v.value.cmplRole)),1),s("p",Ge," ID: "+_(v.value.complaintId||"-"),1)])])]),default:a(()=>[s("div",qe,[s("div",He,[s("h4",Je,[e(l(u),{color:"#ff4d4f"},{default:a(()=>[e(l(Ie))]),_:1}),t[17]||(t[17]=f(" 投诉详情 "))]),s("div",Ke,[s("div",Qe,[s("div",Xe,[s("div",Ye,_(E(v.value.cmplStatus)),1),t[18]||(t[18]=s("div",{class:"text-sm text-gray-700 font-medium"},"当前状态",-1))])]),s("div",Ze,[s("div",et,[s("div",tt,_(T(v.value.cmplRole)),1),t[19]||(t[19]=s("div",{class:"text-sm text-gray-700 font-medium"},"投诉类型",-1))])]),s("div",lt,[s("div",at,[s("div",st,_(P(v.value.createdAt).split(" ")[0]),1),t[20]||(t[20]=s("div",{class:"text-sm text-gray-700 font-medium"},"投诉时间",-1))])])])]),e(l(H)),s("div",ot,[s("div",nt,[e(l(b),{title:"基本信息",size:"small",class:"h-full"},{"header-extra":a(()=>[e(l(u),{color:"#ff4d4f"},{default:a(()=>[e(l(L))]),_:1})]),default:a(()=>[s("div",rt,[s("div",ut,[t[21]||(t[21]=s("span",{class:"text-gray-700 font-medium"},"投诉ID",-1)),e(c,{code:"",style:{"word-break":"break-all","max-width":"200px","background-color":"#f7fafc",color:"#2d3748",padding:"2px 6px","border-radius":"4px"}},{default:a(()=>[f(_(v.value.complaintId||"-"),1)]),_:1})]),s("div",it,[t[22]||(t[22]=s("span",{class:"text-gray-700 font-medium"},"订单ID",-1)),e(c,{code:"",style:{"word-break":"break-all","max-width":"200px","background-color":"#f7fafc",color:"#2d3748",padding:"2px 6px","border-radius":"4px"}},{default:a(()=>[f(_(v.value.orderId||"-"),1)]),_:1})]),s("div",dt,[t[23]||(t[23]=s("span",{class:"text-gray-700 font-medium"},"投诉人ID",-1)),e(c,{code:"",style:{"word-break":"break-all","max-width":"200px","background-color":"#f7fafc",color:"#2d3748",padding:"2px 6px","border-radius":"4px"}},{default:a(()=>[f(_(v.value.complainantId||"-"),1)]),_:1})]),s("div",ct,[t[24]||(t[24]=s("span",{class:"text-gray-700 font-medium"},"投诉时间",-1)),e(c,{style:{color:"#2d3748","font-weight":"500"}},{default:a(()=>[f(_(P(v.value.createdAt)||"-"),1)]),_:1})])])]),_:1})]),s("div",ft,[e(l(b),{title:"投诉内容",size:"small",class:"h-full"},{"header-extra":a(()=>[e(l(u),{color:"#722ed1"},{default:a(()=>[e(l(le))]),_:1})]),default:a(()=>[s("div",pt,[e(c,{style:{color:"#2d3748","font-weight":"500","line-height":"1.6"}},{default:a(()=>[f(_(v.value.cmplDescription||"无详细投诉描述"),1)]),_:1})])]),_:1})])]),e(l(H)),v.value.cmplStatus!==2?(y(),C("div",mt,[s("h4",vt,[e(l(u),{color:"#1890ff"},{default:a(()=>[e(l(ae))]),_:1}),t[25]||(t[25]=f(" 处理操作 "))]),e(l(ee),{model:i.value,"label-placement":"top"},{default:a(()=>[s("div",gt,[e(h,{icon:"material-symbols:settings-outline",class:"mr-2 text-xl"}),t[26]||(t[26]=s("span",null,"处理操作",-1))]),s("div",xt,[s("div",ht,[e(l(k),{label:"处理结果",path:"status"},{default:a(()=>[e(l(W),{value:i.value.status,"onUpdate:value":t[3]||(t[3]=r=>i.value.status=r),placeholder:"请选择处理结果",options:oe},null,8,["value"])]),_:1})]),s("div",_t,[e(l(k),{label:"处理原因",path:"reason"},{default:a(()=>[e(l(B),{value:i.value.reason,"onUpdate:value":t[4]||(t[4]=r=>i.value.reason=r),placeholder:"请输入处理原因"},null,8,["value"])]),_:1})])]),e(l(k),{label:"退款设置"},{default:a(()=>[s("div",bt,[e(l(xe),{checked:i.value.needRefund,"onUpdate:checked":t[5]||(t[5]=r=>i.value.needRefund=r)},{default:a(()=>[s("span",yt,[e(l(u),{color:"#fa8c16"},{default:a(()=>[e(l(De))]),_:1}),t[27]||(t[27]=f(" 需要为用户退款 "))])]),_:1},8,["checked"])])]),_:1}),i.value.needRefund?(y(),G(l(k),{key:0,label:"退款金额",required:""},{default:a(()=>[e(l(he),{value:i.value.refundAmount,"onUpdate:value":t[6]||(t[6]=r=>i.value.refundAmount=r),placeholder:"请输入退款金额",min:.01,max:1e4,precision:2,size:"large",style:{width:"100%"}},{prefix:a(()=>t[28]||(t[28]=[f("¥")])),_:1},8,["value"])]),_:1})):q("",!0),e(l(k),{label:"备注说明"},{default:a(()=>[e(l(B),{value:i.value.remark,"onUpdate:value":t[7]||(t[7]=r=>i.value.remark=r),type:"textarea",placeholder:"请输入处理备注或说明",rows:4,"show-count":"",maxlength:"200"},null,8,["value"])]),_:1})]),_:1},8,["model"]),s("div",wt,[e(l(S),{onClick:t[8]||(t[8]=r=>O.value=!1),size:"large"},{default:a(()=>t[29]||(t[29]=[f(" 取消 ")])),_:1,__:[29]}),e(l(S),{type:"primary",onClick:fe,size:"large",style:{background:"linear-gradient(135deg, #ff4d4f, #ff7875)",border:"none"}},{icon:a(()=>[e(l(u),null,{default:a(()=>[e(l(A))]),_:1})]),default:a(()=>[t[30]||(t[30]=f(" 确认处理 "))]),_:1,__:[30]})])])):(y(),C("div",kt,[e(l(u),{size:"48",color:"#52c41a"},{default:a(()=>[e(l(A))]),_:1}),t[31]||(t[31]=s("p",{class:"text-lg font-medium text-gray-700 mt-4"},"此投诉已处理完成",-1)),t[32]||(t[32]=s("p",{class:"text-sm text-gray-500 mt-2"},"如需重新处理，请联系系统管理员",-1))]))])]),_:1},8,["show"])])}}}),$t=we(Ct,[["__scopeId","data-v-e52d5b45"]]);export{$t as default};
//# sourceMappingURL=index-fRw5A7AQ.js.map
